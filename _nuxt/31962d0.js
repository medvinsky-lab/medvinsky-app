(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{449:function(t,e,n){var r=n(450),o=n(451),l=n(452),h=n(453),c=n(454);function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,h=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){h=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(h)throw o}}}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}n(43),n(11),n(36),n(37),n(47),n(63),n(38),n(197),n(455),n(456),n(48),n(23),n(49),n(25),n(31),n(32),n(50),n(51),n(27);var f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(t).filter((function(t){return e.includes(t)})).reduce((function(e,n){return Object.assign(e,c({},n,t[n]))}),{})},m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.keys(t).filter((function(t){return!e.includes(t)})).reduce((function(e,n){return Object.assign(e,c({},n,t[n]))}),{})},w=function(){"use strict";function t(e,n){var r=e.query,path=e.path,o=e.init,text=e.text,h=e.postprocess,c=void 0===h?[]:h;l(this,t),this.query=r,this.path=path,this.init=o,this.postprocess=c,this.options=n||{},this.onlyKeys=null,this.withoutKeys=null,this.sortKeys=[],this.limitN=null,this.skipN=null,text||this.postprocess.unshift((function(data){return data.map((function(t){return m(t,["text"])}))}))}var e;return h(t,[{key:"only",value:function(t){return this.onlyKeys=Array.isArray(t)?t:[t],this}},{key:"without",value:function(t){return this.withoutKeys=Array.isArray(t)?t:[t],this}},{key:"sortBy",value:function(t,e){return this.sortKeys.push([t,"desc"===e]),this}},{key:"where",value:function(t){return this.query=this.query.find(t),this}},{key:"search",value:function(t,e){return t?(n="object"===o(t)?t:e?{query:{type:"match",field:t,value:e,prefix_length:1,fuzziness:1,extended:!0,minimum_should_match:1}}:{query:{type:"bool",should:this.options.fullTextSearchFields.map((function(e){return{type:"match",field:e,value:t,prefix_length:1,operator:"and",minimum_should_match:1,fuzziness:1,extended:!0}}))}},this.query=this.query.find({$fts:n}).sortByScoring(),this):this;var n}},{key:"surround",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.before,r=void 0===n?1:n,o=e.after,l=void 0===o?1:o,h=0===t.indexOf("/")?"path":"slug";this.onlyKeys&&this.onlyKeys.push(h),this.withoutKeys&&(this.withoutKeys=this.withoutKeys.filter((function(t){return t!==h})));var c=function(data){var e=data.findIndex((function(e){return e[h]===t})),n=new Array(r+l).fill(null,0);if(-1===e)return n;for(var o=data.slice(e-r,e),c=data.slice(e+1,e+1+l),_=0,i=r-1;i>=0;i--)n[i]=o[_]||null,_++;for(var d=0,f=r;f<=l;f++)n[f]=c[d]||null,d++;return n};return this.postprocess.push(c),this}},{key:"limit",value:function(t){return"string"==typeof t&&(t=parseInt(t)),this.limitN=t,this}},{key:"skip",value:function(t){return"string"==typeof t&&(t=parseInt(t)),this.skipN=t,this}},{key:"fetch",value:(e=r(regeneratorRuntime.mark((function t(){var data,e,n,r,o,l,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.sortKeys&&this.sortKeys.length&&(this.query=this.query.compoundsort(this.sortKeys)),this.skipN&&(this.query=this.query.offset(this.skipN)),this.limitN&&(this.query=this.query.limit(this.limitN)),data=this.query.data({removeMeta:!0}),this.onlyKeys&&(this.options.watch&&this.onlyKeys.push("path","extension"),e=function(data){return data.map((function(t){return f(t,h.onlyKeys)}))},this.postprocess.unshift(e)),this.withoutKeys&&(this.options.watch&&(this.withoutKeys=this.withoutKeys.filter((function(t){return!["path","extension"].includes(t)}))),n=function(data){return data.map((function(t){return m(t,h.withoutKeys)}))},this.postprocess.unshift(n)),r=_(this.postprocess);try{for(r.s();!(o=r.n()).done;)l=o.value,data=l(data)}catch(t){r.e(t)}finally{r.f()}if(data){t.next=10;break}throw new Error("".concat(this.path," not found"));case 10:return t.abrupt("return",JSON.parse(JSON.stringify(data)));case 11:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),t}();t.exports=w},450:function(t,e){function n(t,e,n,r,o,l,h){try{var c=t[l](h),_=c.value}catch(t){return void n(t)}c.done?e(_):Promise.resolve(_).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,l){var h=t.apply(e,r);function c(t){n(h,o,l,c,_,"next",t)}function _(t){n(h,o,l,c,_,"throw",t)}c(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},451:function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},452:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},453:function(t,e){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},454:function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},455:function(t,e,n){"use strict";var r=n(5),o=n(68).findIndex,l=n(108),h="findIndex",c=!0;h in[]&&Array(1).findIndex((function(){c=!1})),r({target:"Array",proto:!0,forced:c},{findIndex:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),l(h)},456:function(t,e,n){var r=n(5),o=n(457),l=n(108);r({target:"Array",proto:!0},{fill:o}),l("fill")},457:function(t,e,n){"use strict";var r=n(26),o=n(84),l=n(35);t.exports=function(t){for(var e=r(this),n=l(e),h=arguments.length,c=o(h>1?arguments[1]:void 0,n),_=h>2?arguments[2]:void 0,d=void 0===_?n:o(_,n);d>c;)e[c++]=t;return e}},458:function(t,e,n){var r;"undefined"!=typeof self&&self,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},n.p="",n(n.s=8)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(2);let o={js:(t,e)=>t===e?0:t<e?-1:1,"abstract-js":(t,e)=>t==e?0:t<e?-1:1,"abstract-date":(t,e)=>{let n=new Date(t).toISOString(),r=new Date(e).toISOString();return n==r?0:n<r?-1:1},loki:(t,e)=>Object(r.b)(t,e)?0:Object(r.c)(t,e,!1)?-1:1}},function(t,e,n){"use strict";(function(t){function r(){let e;return function(t){e=t}(void 0!==t&&t||this),e}n.d(e,"a",(function(){return o}));const o=function(){const t=r(),e=Symbol.for("LOKI");return void 0===t[e]&&(t[e]={}),t[e]}()}).call(this,n(7))},function(t,e,n){"use strict";function r(t,e){if(t===e)return!0;if(!t||!e||!0===t||!0===e||t!=t||e!=e){let n,r;switch(t){case void 0:case null:n=1;break;case!1:n=3;break;case!0:n=4;break;case"":n=5;break;default:n=t==t?9:0}switch(e){case void 0:case null:r=1;break;case!1:r=3;break;case!0:r=4;break;case"":r=5;break;default:r=e==e?9:0}if(9!==n||9!==r)return n===r}let n=Number(t),r=Number(e);return n==n||r==r?n===r:(n=t.toString(),r=e.toString(),n==r)}function o(t,e,n){if(!t||!e||!0===t||!0===e||t!=t||e!=e){let r,o;switch(t){case void 0:case null:r=1;break;case!1:r=3;break;case!0:r=4;break;case"":r=5;break;default:r=t==t?9:0}switch(e){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=e==e?9:0}if(9!==r||9!==o)return r===o?n:r<o}let r=Number(t),o=Number(e);return r==r&&o==o?r<o||!(r>o)&&n:r==r&&o!=o||(o!=o||r==r)&&(t<e||!(t>e)&&(t==e?n:(r=t.toString(),o=e.toString(),r<o||r==o&&n)))}function l(t,e,n){if(!t||!e||!0===t||!0===e||t!=t||e!=e){let r,o;switch(t){case void 0:case null:r=1;break;case!1:r=3;break;case!0:r=4;break;case"":r=5;break;default:r=t==t?9:0}switch(e){case void 0:case null:o=1;break;case!1:o=3;break;case!0:o=4;break;case"":o=5;break;default:o=e==e?9:0}if(9!==r||9!==o)return r===o?n:r>o}let r=Number(t),o=Number(e);return r==r&&o==o?r>o||!(r<o)&&n:(r!=r||o==o)&&(o==o&&r!=r||t>e||!(t<e)&&(t==e?n:(r=t.toString(),o=e.toString(),r>o||r==o&&n)))}function h(t,e,n){return r(t,e)?0:o(t,e,!1)?n?1:-1:l(t,e,!1)?n?-1:1:0}n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return h})),n.d(e,"a",(function(){return _}));class c{$eq(a,b){return a===b}$ne(a,b){return a!==b}$gt(a,b){return a>b}$gte(a,b){return a>=b}$lt(a,b){return a<b}$lte(a,b){return a<=b}$between(a,t){return null!=a&&a>=t[0]&&a<=t[1]}$in(a,b){return-1!==b.indexOf(a)}$nin(a,b){return-1===b.indexOf(a)}$keyin(a,b){return a in b}$nkeyin(a,b){return!(a in b)}$definedin(a,b){return void 0!==b[a]}$undefinedin(a,b){return void 0===b[a]}$regex(a,b){return b.test(a)}$containsNone(a,b){return!this.$containsAny(a,b)}$containsAny(a,b){const t=this.containsCheckFn(a);return null!==t&&(Array.isArray(b)?b.some(t):t(b))}$contains(a,b){const t=this.containsCheckFn(a);return null!==t&&(Array.isArray(b)?b.every(t):t(b))}$type(a,b){let t=typeof a;return"object"===t&&(Array.isArray(a)?t="array":a instanceof Date&&(t="date")),"object"!=typeof b?t===b:this.doQueryOp(t,b)}$finite(a,b){return b===isFinite(a)}$size(a,b){return!!Array.isArray(a)&&("object"!=typeof b?a.length===b:this.doQueryOp(a.length,b))}$len(a,b){return"string"==typeof a&&("object"!=typeof b?a.length===b:this.doQueryOp(a.length,b))}$where(a,b){return!0===b(a)}$not(a,b){return!this.doQueryOp(a,b)}$and(a,b){for(let t=0,e=b.length;t<e;t++)if(!this.doQueryOp(a,b[t]))return!1;return!0}$or(a,b){for(let t=0,e=b.length;t<e;t++)if(this.doQueryOp(a,b[t]))return!0;return!1}doQueryOp(t,e){for(let p in e)if(Object.hasOwnProperty.call(e,p))return this[p](t,e[p]);return!1}containsCheckFn(a){return"string"==typeof a||Array.isArray(a)?b=>-1!==a.indexOf(b):"object"==typeof a&&null!==a?b=>Object.hasOwnProperty.call(a,b):null}}let _={js:new c,loki:new class extends c{constructor(){super()}$eq(a,b){return r(a,b)}$ne(a,b){return!r(a,b)}$gt(a,b){return l(a,b,!1)}$gte(a,b){return l(a,b,!0)}$lt(a,b){return o(a,b,!1)}$lte(a,b){return o(a,b,!0)}$between(a,t){return null!=a&&l(a,t[0],!0)&&o(a,t[1],!0)}}}},function(t,e,n){"use strict";var r=n(5);class o{constructor(t){this._field=t,this._lokiMap={},this._valMap={}}set(t,e){if(null!=e){if(e in this._lokiMap)throw new Error("Duplicate key for property "+this._field+": "+e);if(t in this._valMap)throw new Error("Duplicate key for property $loki : "+t);this._lokiMap[e]=t,this._valMap[t]=e}}get(t){return this._lokiMap[t]}update(t,e){if(e!==this._valMap[t]){if(e in this._lokiMap)throw new Error("Duplicate key for property "+this._field+": "+e);this.remove(t),this.set(t,e)}}remove(t){if(!(t in this._valMap))throw new Error("Key is not in unique index: "+this._field);let e=this._valMap[t];delete this._lokiMap[e],delete this._valMap[t]}clear(){this._lokiMap={},this._valMap={}}}function l(t,e,n){return t instanceof Array?(t.push(n),t[t.length-1]):t instanceof Object?(t[e]=n,t[e]):void 0}function h(t,e){for(let n in t){let r=t[n];r instanceof Date?l(e,n,new Date(r.getTime())):r instanceof Function?l(e,n,r):r instanceof Array?h(r,l(e,n,[])):r instanceof Object?h(r,l(e,n,{})):l(e,n,r)}}function c(t){if(/number|string|boolean/.test(typeof t))return t;if(t instanceof Date)return new Date(t.getTime());const e=t instanceof Array?[]:{};return h(t,e),e}function _(data,t="parse-stringify"){if(null==data)return null;let e;switch(t){case"parse-stringify":e=JSON.parse(JSON.stringify(data));break;case"deep":e=c(data);break;case"shallow":e=Object.create(data.constructor.prototype),Object.assign(e,data);break;case"shallow-recurse":e=_(data,"shallow");const t=Object.keys(data);for(let i=0;i<t.length;i++){const n=t[i];"object"==typeof data[n]&&"Object"===data[n].constructor.name&&(e[n]=_(data[n],"shallow-recurse"))}}return e}var d=n(2),f=n(0);function m(t,e,n=0){if(++n>=10)return t;for(const r in t)if("string"==typeof t[r]&&0===t[r].indexOf("[%lktxp]")){const n=t[r].substring(8);void 0!==e[n]&&(t[r]=e[n])}else"object"==typeof t[r]&&(t[r]=m(t[r],e,n));return t}const w={$eq:!0,$dteq:!0,$gt:!0,$gte:!0,$lt:!0,$lte:!0,$in:!0,$between:!0};class v{constructor(t){this._filteredRows=[],this._filterInitialized=!1,this._scoring=null,this._collection=t}reset(){return this._filteredRows.length>0&&(this._filteredRows=[]),this._filterInitialized=!1,this}toJSON(){const t=this.copy();return t._collection=null,t}limit(t){return this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex()),this._filteredRows=this._filteredRows.slice(0,t),this._filterInitialized=!0,this}offset(t){return this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex()),this._filteredRows=this._filteredRows.slice(t),this._filterInitialized=!0,this}copy(){const t=new v(this._collection);return t._filteredRows=this._filteredRows.slice(),t._filterInitialized=this._filterInitialized,t}transform(t,e){"string"==typeof t&&(t=this._collection._transforms[t]),void 0!==e&&(t=function(t,e){if(void 0===e)return t;const n=[];for(let r=0;r<t.length;r++){const o=_(t[r],"shallow-recurse");n.push(m(o,e))}return n}(t,e));let n=this;for(let e=0;e<t.length;e++){const r=t[e];switch(r.type){case"find":n.find(r.value);break;case"where":n.where(r.value);break;case"simplesort":n.simplesort(r.property,r.options);break;case"compoundsort":n.compoundsort(r.value);break;case"sort":n.sort(r.value);break;case"sortByScoring":n.sortByScoring(r.desc);break;case"limit":n=n.limit(r.value);break;case"offset":n=n.offset(r.value);break;case"map":n=n.map(r.value,r.dataOptions);break;case"eqJoin":n=n.eqJoin(r.joinData,r.leftJoinKey,r.rightJoinKey,r.mapFun,r.dataOptions);break;case"mapReduce":n=n.mapReduce(r.mapFunction,r.reduceFunction);break;case"update":n.update(r.value);break;case"remove":n.remove()}}return n}sort(t){this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex());const data=this._collection._data;return this._filteredRows.sort(((a,b)=>t(data[a],data[b]))),this}simplesort(t,e={desc:!1}){if("boolean"==typeof e&&(e={desc:e}),!this._filterInitialized&&this._collection._rangedIndexes.hasOwnProperty(t)){let n=this._collection._rangedIndexes[t].index.rangeRequest(),r=[];for(let t of n)r.push(this._collection.get(t,!0)[1]);return this._filteredRows=e.desc?r.reverse():r,this._filterInitialized=!0,this}this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex());const data=this._collection._data;let n=e.sortComparator?f.a[e.sortComparator]:f.a[this._collection._unindexedSortComparator];return this._filteredRows.sort(((a,b)=>n(data[a][t],data[b][t]))),e.desc&&this._filteredRows.reverse(),this}compoundsort(t){if(0===t.length)throw new Error("Invalid call to compoundsort, need at least one property");if(1===t.length){const e=t[0];return"string"==typeof e?this.simplesort(e,!1):this.simplesort(e[0],e[1])}for(let i=0,e=t.length;i<e;i++){const e=t[i];"string"==typeof e&&(t[i]=[e,!1])}this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex());const data=this._collection._data;return this._filteredRows.sort(((a,b)=>this._compoundeval(t,data[a],data[b]))),this}_compoundeval(t,e,n){for(let i=0,r=t.length;i<r;i++){const r=t[i],o=r[0],l=Object(d.d)(e[o],n[o],r[1]);if(0!==l)return l}return 0}sortByScoring(t=!1){if(null===this._scoring)throw new Error("No scoring available");return t?this._filteredRows.sort(((a,b)=>this._scoring[a].score-this._scoring[b].score)):this._filteredRows.sort(((a,b)=>this._scoring[b].score-this._scoring[a].score)),this}getScoring(){if(null===this._scoring)throw new Error("No scoring available");const t=[];for(let i=0;i<this._filteredRows.length;i++)t.push(this._scoring[this._filteredRows[i]]);return t}findOr(t){const e=[],n=[],r=this.count();for(let o=0,l=t.length;o<l;o++){const l=this.copy().find(t[o])._filteredRows,h=l.length;if(h===r)return this;for(let t=0;t<h;t++){const r=l[t];void 0===n[r]&&(n[r]=!0,e.push(r))}}return this._filteredRows=e,this._filterInitialized=!0,this}$or(t){return this.findOr(t)}findAnd(t){for(let i=0,e=t.length;i<e;i++){if(0===this.count())return this;this.find(t[i])}return this}$and(t){return this.findAnd(t)}find(t,e=!1){if(0===this._collection._data.length)return this._filteredRows=[],this._filterInitialized=!0,this;const n=t||"getAll";let r,o,l;if("object"==typeof n){let t=[];for(let p in n){let e={};e[p]=n[p],t.push(e),void 0!==n[p]&&(r=p,o=n[p])}if(t.length>1)return this.find({$and:t},e)}if(!r||"getAll"===n)return e&&(this._filteredRows=this._collection._data.length>0?[0]:[],this._filterInitialized=!0),this;if("$and"===r||"$or"===r)return this[r](o),e&&this._filteredRows.length>1&&(this._filteredRows=this._filteredRows.slice(0,1)),this;let h="";if(null===o||"object"!=typeof o||o instanceof Date)h="$eq",l=o;else{if("object"!=typeof o)throw new Error("Do not know what you want to do.");for(let t in o)if(void 0!==o[t]){h=t,l=o[t];break}}"$regex"===h&&(Array.isArray(l)?l=new RegExp(l[0],l[1]):l instanceof RegExp||(l=new RegExp(l)));let c=!1;!this._filterInitialized&&this._collection._rangedIndexes[r]&&w[h]&&(c=!0);const _=d.a[this._collection._defaultLokiOperatorPackage],data=this._collection._data;let f=[];if(this._filterInitialized){let filter=this._filteredRows;if("$fts"===r){this._scoring=this._collection._fullTextSearch.search(n.$fts);let t=Object.keys(this._scoring);for(let i=0;i<t.length;i++)-1!==filter.indexOf(+t[i])&&f.push(+t[i])}else if(void 0!==this._collection._constraints.unique[r]&&"$eq"===h){const t=this._collection._constraints.unique[r].get(l);if(void 0!==t){const e=this._collection.get(t,!0)[1];-1!==filter.indexOf(e)&&f.push(e)}}else for(let i=0;i<filter.length;i++){let t=filter[i];_[h](data[t][r],l)&&f.push(t)}return this._filteredRows=f,this._filterInitialized=!0,this}if(this._filteredRows=f,this._filterInitialized=!0,"$fts"===r){this._scoring=this._collection._fullTextSearch.search(n.$fts);let t=Object.keys(this._scoring);for(let i=0;i<t.length;i++)f.push(+t[i]);return this}if(void 0!==this._collection._constraints.unique[r]&&"$eq"===h){const t=this._collection._constraints.unique[r].get(l);return void 0!==t&&f.push(this._collection.get(t,!0)[1]),this}if(!c){for(let i=0;i<data.length;i++)if(_[h](data[i][r],l)&&(f.push(i),e))return this;return this}if(this._collection._rangedIndexes[r]){if("$in"===h){let t=this._collection._rangedIndexes[r];for(let e of l){let n=t.index.rangeRequest({op:"$eq",val:e});for(let t of n)f.push(this._collection.get(t,!0)[1])}return this}if("$between"===h){let t=this._collection._rangedIndexes[r].index.rangeRequest({op:h,val:l[0],high:l[1]});for(let e of t)f.push(this._collection.get(e,!0)[1]);return this}let t=this._collection._rangedIndexes[r].index.rangeRequest({op:h,val:l});if(!0!==w[h])for(let e of t){let t=this._collection.get(e,!0)[1];w[h](data[t][r],l)&&f.push(t)}else for(let e of t)f.push(this._collection.get(e,!0)[1])}return this}where(t){let e,n=[];if("function"!=typeof t)throw new TypeError("Argument is not a stored view or a function");if(e=t,this._filterInitialized){let t=this._filteredRows.length;for(;t--;)!0===e(this._collection._data[this._filteredRows[t]])&&n.push(this._filteredRows[t]);return this._filteredRows=n,this}{let t=this._collection._data.length;for(;t--;)!0===e(this._collection._data[t])&&n.push(t);return this._filteredRows=n,this._filterInitialized=!0,this}}count(){return this._filterInitialized?this._filteredRows.length:this._collection.count()}data(t={}){let e,n,r;({forceClones:e=!1,forceCloneMethod:n=this._collection._cloneMethod,removeMeta:r=!1}=t);let o,l,h=[],data=this._collection._data;if(r&&!e&&(e=!0,n="shallow"),this._collection._disableDeltaChangesApi||(e=!0,n="deep"),!this._filterInitialized){if(0===this._filteredRows.length){if(this._collection._cloneObjects||e){l=n;for(let i=0;i<data.length;i++)o=this._collection._defineNestedProperties(_(data[i],l)),r&&(delete o.$loki,delete o.meta),h.push(o);return h}return data.slice()}this._filterInitialized=!0}const c=this._filteredRows;if(this._collection._cloneObjects||e){l=n;for(let i=0;i<c.length;i++)o=this._collection._defineNestedProperties(_(data[c[i]],l)),r&&(delete o.$loki,delete o.meta),h.push(o)}else for(let i=0;i<c.length;i++)h.push(data[c[i]]);return h}update(t){this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex());const e=this._filteredRows.length,n=this._collection._data;for(let r=0;r<e;r++)if(this._collection._cloneObjects||!this._collection._disableDeltaChangesApi){const e=_(n[this._filteredRows[r]],this._collection._cloneMethod);t(e),this._collection.update(e)}else t(n[this._filteredRows[r]]),this._collection.update(n[this._filteredRows[r]]);return this}remove(){return this._filterInitialized||0!==this._filteredRows.length||(this._filteredRows=this._collection._prepareFullDocIndex()),this._collection.remove(this.data()),this._filteredRows=[],this}mapReduce(t,e){try{return e(this.data().map(t))}catch(t){throw t}}eqJoin(t,e,n,r,o){let l,h,c=[],_=[],d="function"==typeof e,f="function"==typeof n,m={},w=this.data(o),y=w.length;if(t instanceof C)c=t.chain().data(o);else if(t instanceof v)c=t.data(o);else{if(!Array.isArray(t))throw new TypeError("joinData needs to be an array or result set");c=t}l=c.length;for(let i=0;i<l;i++)h=f?n(c[i]):c[i][n],m[h]=c[i];r||(r=(t,e)=>({left:t,right:e}));for(let t=0;t<y;t++)h=d?e(w[t]):w[t][e],_.push(r(w[t],m[h]||{}));return this._collection=new C("joinData"),this._collection.insert(_),this._filteredRows=[],this._filterInitialized=!1,this}map(t,e){const data=this.data(e).map(t);return this._collection=new C("mappedData"),this._collection.insert(data),this._filteredRows=[],this._filterInitialized=!1,this}}class y extends r.a{constructor(t,e,n={}){super(),this._rebuildPending=!1,this._resultData=[],this._resultDirty=!1,this._cachedResultSet=null,this._filterPipeline=[],this._sortFunction=null,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=null,this._sortDirty=!1,({persistent:this._persistent=!1,sortPriority:this._sortPriority="passive",minRebuildInterval:this._minRebuildInterval=1}=n),this._collection=t,this.name=e,this._resultSet=new v(t),this._events={rebuild:[]}}_rematerialize({removeWhereFilters:t=!1}){if(this._resultData=[],this._resultDirty=!0,this._resultSet=new v(this._collection),(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple||null!==this._sortByScoring)&&(this._sortDirty=!0),t){let t=this._filterPipeline.length;for(;t--;)"where"===this._filterPipeline[t].type&&(t!==this._filterPipeline.length-1&&(this._filterPipeline[t]=this._filterPipeline[this._filterPipeline.length-1]),this._filterPipeline.length--)}const e=this._filterPipeline;this._filterPipeline=[];for(let t=0;t<e.length;t++)this.applyFind(e[t].val);return this.data(),this.emit("rebuild",this),this}branchResultSet(t,e){const n=this._resultSet.copy();return void 0===t?n:n.transform(t,e)}toJSON(){return{name:this.name,_persistent:this._persistent,_sortPriority:this._sortPriority,_minRebuildInterval:this._minRebuildInterval,_resultSet:this._resultSet,_filterPipeline:this._filterPipeline,_sortCriteria:this._sortCriteria,_sortCriteriaSimple:this._sortCriteriaSimple,_sortByScoring:this._sortByScoring,_sortDirty:this._sortDirty}}static fromJSONObject(t,e){let n=new y(t,e.name);return n._resultDirty=!0,n._filterPipeline=e._filterPipeline,n._resultData=[],n._sortCriteria=e._sortCriteria,n._sortCriteriaSimple=e._sortCriteriaSimple,n._sortByScoring=e._sortByScoring,n._sortDirty=e._sortDirty,n._resultSet._filteredRows=e._resultSet._filteredRows,n._resultSet._filterInitialized=e._resultSet._filterInitialized,n._rematerialize({removeWhereFilters:!0}),n}removeFilters({queueSortPhase:t=!1}={}){this._rebuildPending=!1,this._resultSet.reset(),this._resultData=[],this._resultDirty=!0,this._cachedResultSet=null,this._filterPipeline=[],this._sortFunction=null,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=null,this._sortDirty=!1,!0===t&&this._queueSortPhase()}applySort(t){return this._sortFunction=t,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=null,this._queueSortPhase(),this}applySimpleSort(t,e=!1){return this._sortCriteriaSimple={field:t,options:e},this._sortFunction=null,this._sortCriteria=null,this._sortByScoring=null,this._queueSortPhase(),this}applySortCriteria(t){return this._sortCriteria=t,this._sortCriteriaSimple=null,this._sortFunction=null,this._sortByScoring=null,this._queueSortPhase(),this}applySortByScoring(t=!1){return this._sortFunction=null,this._sortCriteria=null,this._sortCriteriaSimple=null,this._sortByScoring=t,this._queueSortPhase(),this}getScoring(){return this._resultSet.getScoring()}startTransaction(){return this._cachedResultSet=this._resultSet.copy(),this}commit(){return this._cachedResultSet=null,this}rollback(){return this._resultSet=this._cachedResultSet,this._persistent&&(this._resultData=this._resultSet.data(),this.emit("rebuild",this)),this}_indexOfFilterWithId(t){if("string"==typeof t||"number"==typeof t)for(let e=0,n=this._filterPipeline.length;e<n;e++)if(t===this._filterPipeline[e].uid)return e;return-1}_addFilter(filter){this._filterPipeline.push(filter),this._resultSet[filter.type](filter.val)}reapplyFilters(){this._resultSet.reset(),this._cachedResultSet=null,this._persistent&&(this._resultData=[],this._resultDirty=!0);const t=this._filterPipeline;this._filterPipeline=[];for(let e=0,n=t.length;e<n;e++)this._addFilter(t[e]);return this._sortFunction||this._sortCriteria||this._sortCriteriaSimple||null!==this._sortByScoring?this._queueSortPhase():this._queueRebuildEvent(),this}applyFilter(filter){const t=this._indexOfFilterWithId(filter.uid);return t>=0?(this._filterPipeline[t]=filter,this.reapplyFilters()):(this._cachedResultSet=null,this._persistent&&(this._resultData=[],this._resultDirty=!0),this._addFilter(filter),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple||null!==this._sortByScoring?this._queueSortPhase():this._queueRebuildEvent(),this)}applyFind(t,e=""){return this.applyFilter({type:"find",val:t,uid:e}),this}applyWhere(t,e){return this.applyFilter({type:"where",val:t,uid:e}),this}removeFilter(t){const e=this._indexOfFilterWithId(t);if(e<0)throw new Error("Dynamic view does not contain a filter with ID: "+t);return this._filterPipeline.splice(e,1),this.reapplyFilters(),this}count(){return this._resultDirty&&(this._resultData=this._resultSet.data()),this._resultSet.count()}data(t={}){return(this._sortDirty||this._resultDirty)&&this._performSortPhase({suppressRebuildEvent:!0}),this._persistent?this._resultData:this._resultSet.data(t)}_queueRebuildEvent(){this._rebuildPending||(this._rebuildPending=!0,setTimeout((()=>{this._rebuildPending&&(this._rebuildPending=!1,this.emit("rebuild",this))}),this._minRebuildInterval))}_queueSortPhase(){this._sortDirty||(this._sortDirty=!0,"active"===this._sortPriority?setTimeout((()=>{this._performSortPhase()}),this._minRebuildInterval):this._queueRebuildEvent())}_performSortPhase(t={}){(this._sortDirty||this._resultDirty)&&(this._sortDirty&&(this._sortFunction?this._resultSet.sort(this._sortFunction):this._sortCriteria?this._resultSet.compoundsort(this._sortCriteria):this._sortCriteriaSimple?this._resultSet.simplesort(this._sortCriteriaSimple.field,this._sortCriteriaSimple.options):null!==this._sortByScoring&&this._resultSet.sortByScoring(this._sortByScoring),this._sortDirty=!1),this._persistent&&(this._resultData=this._resultSet.data(),this._resultDirty=!1),t.suppressRebuildEvent||this.emit("rebuild",this))}_evaluateDocument(t,e){if(!this._resultSet._filterInitialized)return this._persistent&&(this._resultData=this._resultSet.data()),void(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent());const n=this._resultSet._filteredRows,r=e?-1:n.indexOf(+t),o=n.length,l=new v(this._collection);let filter;l._filteredRows=[t],l._filterInitialized=!0;for(let t=0,e=this._filterPipeline.length;t<e;t++)filter=this._filterPipeline[t],l[filter.type](filter.val);const h=0===l._filteredRows.length?-1:0;return-1!==r||-1!==h?-1===r&&-1!==h?(n.push(t),this._persistent&&this._resultData.push(this._collection._data[t]),void(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent())):-1!==r&&-1===h?(r<o-1?(n.splice(r,1),this._persistent&&this._resultData.splice(r,1)):(n.length=o-1,this._persistent&&(this._resultData.length=o-1)),void(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent())):void(-1!==r&&-1!==h&&(this._persistent&&(this._resultData[r]=this._collection._data[t]),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent())):void 0}_removeDocument(t){if(!this._resultSet._filterInitialized)return this._persistent&&(this._resultData=this._resultSet.data()),void(this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent());const e=this._resultSet._filteredRows,n=e.indexOf(+t);let r=e.length;-1!==n&&(n<r-1?(e[n]=e[r-1],e.length=r-1,this._persistent&&(this._resultData[n]=this._resultData[r-1],this._resultData.length=r-1)):(e.length=r-1,this._persistent&&(this._resultData.length=r-1)),this._sortFunction||this._sortCriteria||this._sortCriteriaSimple?this._queueSortPhase():this._queueRebuildEvent()),r=e.length;for(let n=0;n<r;n++)e[n]>t&&e[n]--}mapReduce(t,e){try{return e(this.data().map(t))}catch(t){throw t}}}var x=n(4),S=n(1);function k(t){return t.reduce(((a,b)=>a+b),0)/t.length}function I(t,path,e,n=0){if(void 0===t)return!1;if(n+1===path.length)return e.push(t[path[n]]),!1;const r=t[path[n]];if(Array.isArray(r)){for(let i=0;i<r.length;i++)I(r[i],path,e,n+1);return!0}return I(r,path,e,n+1)}n.d(e,"a",(function(){return C}));class C extends r.a{constructor(t,e={}){if(super(),this._data=[],this._idIndex=[],this._rangedIndexes={},this._lokimap={},this._unindexedSortComparator="js",this._defaultLokiOperatorPackage="js",this._constraints={unique:{}},this._transforms={},this._dirty=!0,this._cached=null,this._nestedProperties=[],this._ttl={age:null,ttlInterval:null,daemon:null},this._maxId=0,this._dynamicViews=[],this._changes=[],this._stages={},this._commitLog=[],e&&!0===e.disableMeta){if(!1===e.disableChangesApi)throw new Error("disableMeta option cannot be passed as true when disableChangesApi is passed as false");if(!1===e.disableDeltaChangesApi)throw new Error("disableMeta option cannot be passed as true when disableDeltaChangesApi is passed as false");if("number"==typeof e.ttl&&e.ttl>0)throw new Error("disableMeta option cannot be passed as true when ttl is enabled")}if(this.name=t,this._unindexedSortComparator=e.unindexedSortComparator||"js",this._defaultLokiOperatorPackage=e.defaultLokiOperatorPackage||"js",void 0!==e.unique&&(Array.isArray(e.unique)||(e.unique=[e.unique]),e.unique.forEach((t=>{this._constraints.unique[t]=new o(t)}))),void 0!==S.a.FullTextSearch?this._fullTextSearch=void 0!==e.fullTextSearch?new S.a.FullTextSearch(e.fullTextSearch):null:this._fullTextSearch=null,this._transactional=void 0!==e.transactional&&e.transactional,this._cloneObjects=void 0!==e.clone&&e.clone,this._asyncListeners=void 0!==e.asyncListeners&&e.asyncListeners,this._disableMeta=void 0!==e.disableMeta&&e.disableMeta,this._disableChangesApi=void 0===e.disableChangesApi||e.disableChangesApi,this._disableDeltaChangesApi=void 0===e.disableDeltaChangesApi||e.disableDeltaChangesApi,this._cloneMethod=void 0!==e.cloneMethod?e.cloneMethod:"deep",this._disableChangesApi&&(this._disableDeltaChangesApi=!0),this._serializableIndexes=void 0===e.serializableIndexes||e.serializableIndexes,null!=e.nestedProperties)for(let i=0;i<e.nestedProperties.length;i++){const t=e.nestedProperties[i];"string"==typeof t?this._nestedProperties.push({name:t,path:t.split(".")}):this._nestedProperties.push(t)}this.setTTL(e.ttl||-1,e.ttlInterval),this._events={insert:[],update:[],"pre-insert":[],"pre-update":[],close:[],flushbuffer:[],error:[],delete:[],warning:[]},this._ensureId();let n=e.rangedIndexes||{};for(let t in n)this.ensureRangedIndex(t,n[t].indexTypeName,n[t].comparatorName);this.setChangesApi(this._disableChangesApi,this._disableDeltaChangesApi),this.flushChanges()}toJSON(){return{name:this.name,unindexedSortComparator:this._unindexedSortComparator,defaultLokiOperatorPackage:this._defaultLokiOperatorPackage,_dynamicViews:this._dynamicViews,uniqueNames:Object.keys(this._constraints.unique),transforms:this._transforms,rangedIndexes:this._rangedIndexes,_data:this._data,idIndex:this._idIndex,maxId:this._maxId,_dirty:this._dirty,_nestedProperties:this._nestedProperties,transactional:this._transactional,asyncListeners:this._asyncListeners,disableMeta:this._disableMeta,disableChangesApi:this._disableChangesApi,disableDeltaChangesApi:this._disableDeltaChangesApi,cloneObjects:this._cloneObjects,cloneMethod:this._cloneMethod,changes:this._changes,_fullTextSearch:this._fullTextSearch}}static fromJSONObject(t,e){let n=new C(t.name,{disableChangesApi:t.disableChangesApi,disableDeltaChangesApi:t.disableDeltaChangesApi,unindexedSortComparator:t.unindexedSortComparator,defaultLokiOperatorPackage:t.defaultLokiOperatorPackage});if(n._transactional=t.transactional,n._asyncListeners=t.asyncListeners,n._disableMeta=t.disableMeta,n._disableChangesApi=t.disableChangesApi,n._cloneObjects=t.cloneObjects,n._cloneMethod=t.cloneMethod||"deep",n._changes=t.changes,n._nestedProperties=t._nestedProperties,n._rangedIndexes=t.rangedIndexes||{},n._dirty=!(!e||!0!==e.retainDirtyFlags)&&t._dirty,e&&void 0!==e[t.name]){let r=function(t){const n=e[t.name];if(n.proto){const t=n.inflate||((t,e)=>{for(let n in t)e[n]=t[n]});return data=>{const e=new n.proto;return t(data,e),e}}return n.inflate}(t);for(let e=0;e<t._data.length;e++)n._data[e]=n._defineNestedProperties(r(t._data[e])),n._lokimap[n._data[e].$loki]=n._data[e]}else for(let e=0;e<t._data.length;e++)n._data[e]=n._defineNestedProperties(t._data[e]),n._lokimap[n._data[e].$loki]=n._data[e];n._maxId=void 0===t.maxId?0:t.maxId,n._idIndex=t.idIndex,void 0!==t.transforms&&(n._transforms=t.transforms);for(let e in t.rangedIndexes){let r=t.rangedIndexes[e],o=(0,x.a[r.indexTypeName])(e,f.a[r.comparatorName]);o.restore(r.index),n._rangedIndexes[e].index=o}if(n._ensureId(),void 0!==t.uniqueNames)for(let e=0;e<t.uniqueNames.length;e++)n.ensureUniqueIndex(t.uniqueNames[e]);if(void 0!==t._dynamicViews)for(let e=0;e<t._dynamicViews.length;e++)n._dynamicViews.push(y.fromJSONObject(n,t._dynamicViews[e]));return t._fullTextSearch&&(n._fullTextSearch=S.a.FullTextSearch.fromJSONObject(t._fullTextSearch,e.fullTextSearch)),n}addTransform(t,e){if(void 0!==this._transforms[t])throw new Error("a transform by that name already exists");this._transforms[t]=e}getTransform(t){return this._transforms[t]}setTransform(t,e){this._transforms[t]=e}removeTransform(t){delete this._transforms[t]}setTTL(t,e){t<0?clearInterval(this._ttl.daemon):(this._ttl.age=t,this._ttl.ttlInterval=e,this._ttl.daemon=setInterval((()=>{const t=Date.now();this.chain().where((e=>{const n=e.meta.updated||e.meta.created,r=t-n;return this._ttl.age<r})).remove()}),e))}_prepareFullDocIndex(){const t=new Array(this._data.length);for(let i=0;i<t.length;i++)t[i]=i;return t}ensureIndex(t,e,n){this.ensureRangedIndex(t,e,n)}ensureRangedIndex(t,e,n){if(e=e||"avl",n=n||"loki",!x.a[e])throw new Error("ensureRangedIndex: Unknown range index type");if(!f.a[n])throw new Error("ensureRangedIndex: Unknown comparator");let r=x.a[e],o=f.a[n];this._rangedIndexes[t]={index:r(t,o),indexTypeName:e,comparatorName:n};let l=this._rangedIndexes[t].index;for(let i=0;i<this._data.length;i++)l.insert(this._data[i].$loki,this._data[i][t])}ensureUniqueIndex(t){let e=new o(t);this._constraints.unique[t]=e;for(let i=0;i<this._data.length;i++)e.set(this._data[i].$loki,this._data[i][t]);return e}count(t){return t?this.chain().find(t)._filteredRows.length:this._data.length}_ensureId(){this._idIndex=[];for(let i=0;i<this._data.length;i++)this._idIndex.push(this._data[i].$loki)}addDynamicView(t,e){const n=new y(this,t,e);return this._dynamicViews.push(n),n}removeDynamicView(t){for(let e=0;e<this._dynamicViews.length;e++)this._dynamicViews[e].name===t&&this._dynamicViews.splice(e,1)}getDynamicView(t){for(let e=0;e<this._dynamicViews.length;e++)if(this._dynamicViews[e].name===t)return this._dynamicViews[e];return null}findAndUpdate(t,e){this.chain().find(t).update(e)}findAndRemove(t){this.chain().find(t).remove()}insert(t){if(!Array.isArray(t))return this.insertOne(t);let e,n=[];this.emit("pre-insert",t);for(let i=0;i<t.length;i++){if(e=this.insertOne(t[i],!0),!e)return;n.push(e)}return this.emit("insert",n),n=this._cloneObjects?_(n,this._cloneMethod):n,1===n.length?n[0]:n}insertOne(t,e=!1){let n,r=null;if("object"!=typeof t?r=new TypeError("Document needs to be an object"):null===t&&(r=new TypeError("Object cannot be null")),null!==r)throw this.emit("error",r),r;const o=this._defineNestedProperties(this._cloneObjects?_(t,this._cloneMethod):t);if(this._disableMeta||void 0!==o.meta||(o.meta={version:0,revision:0,created:0}),e||this.emit("pre-insert",o),this._add(o))return this._disableChangesApi?this._insertMeta(o):this._insertMetaWithChange(o),n=this._cloneObjects?_(o,this._cloneMethod):o,e||this.emit("insert",n),n}_defineNestedProperties(data){for(let i=0;i<this._nestedProperties.length;i++){const t=this._nestedProperties[i].name,path=this._nestedProperties[i].path;Object.defineProperty(data,t,{get(){const t=[];return I(this,path,t)?t:t[0]},set(t){path.slice(0,path.length-1).reduce(((t,e)=>t&&t[e]?t[e]:null),this)[path[path.length-1]]=t},enumerable:!1,configurable:!0})}return data}clear({removeIndices:t=!1}={}){if(this._data=[],this._idIndex=[],this._cached=null,this._maxId=0,this._dynamicViews=[],this._dirty=!0,!0===t)this._rangedIndexes={},this._constraints={unique:{}};else{for(let t in this._rangedIndexes)this.ensureRangedIndex(t,this._rangedIndexes[t].indexTypeName,this._rangedIndexes[t].comparatorName);const t=Object.keys(this._constraints.unique);for(let i=0;i<t.length;i++)this._constraints.unique[t[i]].clear()}null!==this._fullTextSearch&&this._fullTextSearch.clear()}update(t){if(Array.isArray(t))for(let i=0;i<t.length;i++)this.update(t[i]);else{if(void 0===t.$loki)throw new Error("Trying to update unsynced document. Please save the document first by using insert() or addMany()");try{this.startTransaction();const e=this.get(t.$loki,!0);if(!e)throw new Error("Trying to update a document not in collection.");let n=e[0],r=e[1],o=this._defineNestedProperties(this._cloneObjects||!this._disableDeltaChangesApi?_(t,this._cloneMethod):t);this.emit("pre-update",t),Object.keys(this._constraints.unique).forEach((t=>{this._constraints.unique[t].update(o.$loki,o[t])})),this._data[r]=o,this._lokimap[t.$loki]=o;for(let t=0;t<this._dynamicViews.length;t++)this._dynamicViews[t]._evaluateDocument(r,!1);for(let e in this._rangedIndexes)this._rangedIndexes[e].index.update(t.$loki,t[e]);this._idIndex[r]=o.$loki,null!==this._fullTextSearch&&this._fullTextSearch.updateDocument(t,r),this.commit(),this._dirty=!0,this._disableChangesApi?this._updateMeta(o):this._updateMetaWithChange(o,n);let l=o;this._cloneObjects&&(l=_(o,this._cloneMethod)),this.emit("update",l,n)}catch(t){throw this.rollback(),this.emit("error",t),t}}}_add(t){if("object"!=typeof t)throw new TypeError("Object being added needs to be an object");if(void 0!==t.$loki)throw new Error("Document is already in collection, please use update()");try{this.startTransaction(),this._maxId++,isNaN(this._maxId)&&(this._maxId=this._data[this._data.length-1].$loki+1);const e=t;e.$loki=this._maxId,this._disableMeta||(e.meta.version=0);const n=this._constraints.unique;for(const t in n)void 0!==n[t]&&n[t].set(e.$loki,e[t]);this._idIndex.push(e.$loki),this._lokimap[e.$loki]=e,this._data.push(e);const r=this._data.length-1,o=this._dynamicViews.length;for(let i=0;i<o;i++)this._dynamicViews[i]._evaluateDocument(r,!0);for(let n in this._rangedIndexes)this._serializableIndexes&&e[n]instanceof Date&&(e[n]=e[n].getTime()),this._rangedIndexes[n].index.insert(t.$loki,t[n]);return null!==this._fullTextSearch&&this._fullTextSearch.addDocument(e,r),this.commit(),this._dirty=!0,this._cloneObjects?_(e,this._cloneMethod):e}catch(t){throw this.rollback(),this.emit("error",t),t}}updateWhere(t,e){const n=this.where(t);try{for(let i=0;i<n.length;i++)this.update(e(n[i]))}catch(t){throw this.rollback(),t}}removeWhere(t){this.remove(this._data.filter(t))}removeDataOnly(){this.remove(this._data.slice())}remove(t){if("number"==typeof t&&(t=this.get(t)),Array.isArray(t)){let e=0;const n=t.length;for(;e<n;e++)this.remove(t[e])}else{if(void 0===t.$loki)throw new Error("Object is not a document stored in the collection");try{this.startTransaction();const e=this.get(t.$loki,!0),n=e[1];let r="number"==typeof t?this.get(t):t;Object.keys(this._constraints.unique).forEach((t=>{t in r&&this._constraints.unique[t].remove(r.$loki)}));for(let t=0;t<this._dynamicViews.length;t++)this._dynamicViews[t]._removeDocument(n);this._data.splice(n,1),this._idIndex.splice(n,1),delete this._lokimap[t.$loki];for(let e in this._rangedIndexes)this._rangedIndexes[e].index.remove(t.$loki);null!==this._fullTextSearch&&this._fullTextSearch.removeDocument(t,n),this.commit(),this._dirty=!0,this._disableChangesApi||this._createChange(this.name,"R",e[0]),this.emit("delete",e[0]),delete t.$loki,delete t.meta}catch(t){throw this.rollback(),this.emit("error",t),t}}}getChanges(){return this._changes}setChangesApi(t,e=!0){this._disableChangesApi=t,this._disableDeltaChangesApi=!!t||e}flushChanges(){this._changes=[]}_getObjectDelta(t,e){const n=null!==e&&"object"==typeof e?Object.keys(e):null;if(n&&n.length&&["string","boolean","number"].indexOf(typeof e)<0){const r={};for(let i=0;i<n.length;i++){const o=n[i];if(e.hasOwnProperty(o))if(t.hasOwnProperty(o)&&void 0===this._constraints.unique[o]&&"$loki"!==o&&"meta"!==o){const n=this._getObjectDelta(t[o],e[o]);void 0!==n&&n!=={}&&(r[o]=n)}else r[o]=e[o]}return 0===Object.keys(r).length?void 0:r}return t===e?void 0:e}_getChangeDelta(t,e){return e?this._getObjectDelta(e,t):JSON.parse(JSON.stringify(t))}_createChange(t,e,n,r){this._changes.push({name:t,operation:e,obj:"U"!==e||this._disableDeltaChangesApi?JSON.parse(JSON.stringify(n)):this._getChangeDelta(n,r)})}_createInsertChange(t){this._createChange(this.name,"I",t)}_createUpdateChange(t,e){this._createChange(this.name,"U",t,e)}_insertMetaWithChange(t){this._insertMeta(t),this._createInsertChange(t)}_updateMetaWithChange(t,e){this._updateMeta(t),this._createUpdateChange(t,e)}_insertMeta(t){this._disableMeta||(t.meta||(t.meta={version:0,revision:0,created:0}),t.meta.created=(new Date).getTime(),t.meta.revision=0)}_updateMeta(t){this._disableMeta||(t.meta.updated=(new Date).getTime(),t.meta.revision+=1)}get(t,e=!1){if(!e){let e=this._lokimap[t];return void 0===e?null:e}const data=this._idIndex;let n=data.length-1,r=0,o=r+n>>1;if(t="number"==typeof t?t:parseInt(t,10),isNaN(t))throw new TypeError("Passed id is not an integer");for(;data[r]<data[n];)o=r+n>>1,data[o]<t?r=o+1:n=o;return n===r&&data[r]===t?e?[this._data[r],r]:this._data[r]:null}by(t,e){let n=this._constraints.unique[t].get(e);return this._cloneObjects?_(this._lokimap[n],this._cloneMethod):this._lokimap[n]}findOne(t){t=t||{};const e=this.chain().find(t,!0).data();return Array.isArray(e)&&0===e.length?null:this._cloneObjects?_(e[0],this._cloneMethod):e[0]}chain(t,e){const n=new v(this);return void 0===t?n:n.transform(t,e)}find(t){return this.chain().find(t).data()}findOneUnindexed(t,e){let n,i=this._data.length;for(;i--;)if(this._data[i][t]===e)return n=this._data[i],n;return null}startTransaction(){if(this._transactional){let t={};for(let e in this._rangedIndexes)t[e].indexTypeName=this._rangedIndexes[e].indexTypeName,t[e].comparatorName=this._rangedIndexes[e].comparatorName,t[e].index=this._rangedIndexes[e].index.backup();this._cached={index:this._idIndex,data:_(this._data,this._cloneMethod),rangedIndexes:t};for(let t=0;t<this._dynamicViews.length;t++)this._dynamicViews[t].startTransaction()}}commit(){if(this._transactional){this._cached=null;for(let t=0;t<this._dynamicViews.length;t++)this._dynamicViews[t].commit()}}rollback(){if(this._transactional&&null!==this._cached){this._idIndex=this._cached.index,this._data=this._cached.data;for(let i=0;i<this._data.length;i++)this._data[i]=this._defineNestedProperties(this._data[i]);for(let t in this._cached.rangedIndexes){let e=this._cached.rangedIndexes[t],n=(0,x.a[e.indexTypeName])(t,f.a[e.comparatorName]);n.restore(e.index),this._rangedIndexes[t].index=n}for(let t=0;t<this._dynamicViews.length;t++)this._dynamicViews[t].rollback()}}where(t){return this.chain().where(t).data()}mapReduce(t,e){return e(this._data.map(t))}eqJoin(t,e,n,r,o){return new v(this).eqJoin(t,e,n,r,o)}getStage(t){return this._stages[t]||(this._stages[t]={}),this._stages[t]}stage(t,e){const n=JSON.parse(JSON.stringify(e));return this.getStage(t)[e.$loki]=n,n}commitStage(t,e){const n=this.getStage(t),r=(new Date).getTime();for(const t in n)this.update(n[t]),this._commitLog.push({timestamp:r,message:e,data:JSON.parse(JSON.stringify(n[t]))});this._stages[t]={}}extract(t){const e=[];for(let i=0;i<this._data.length;i++)e.push(this._data[i][t]);return e}min(t){return Math.min.apply(null,this.extractNumerical(t))}max(t){return Math.max.apply(null,this.extractNumerical(t))}minRecord(t){const e={index:0,value:0};if(0===this._data.length)return e.index=null,e.value=null,e;e.index=this._data[0].$loki,e.value=parseFloat(this._data[0][t]);for(let i=1;i<this._data.length;i++){const n=parseFloat(this._data[i][t]);e.value>n&&(e.value=n,e.index=this._data[i].$loki)}return e}maxRecord(t){const e={index:0,value:0};if(0===this._data.length)return e.index=null,e.value=null,e;e.index=this._data[0].$loki,e.value=parseFloat(this._data[0][t]);for(let i=1;i<this._data.length;i++){const n=parseFloat(this._data[i][t]);e.value<n&&(e.value=n,e.index=this._data[i].$loki)}return e}extractNumerical(t){return this.extract(t).map(parseFloat).filter(Number).filter((t=>!isNaN(t)))}avg(t){return k(this.extractNumerical(t))}stdDev(t){return function(t){const e=k(t),n=k(t.map((t=>{const n=t-e;return n*n})));return Math.sqrt(n)}(this.extractNumerical(t))}mode(t){const e={},data=this.extractNumerical(t);let n=data[0],r=-1/0;for(let i=0;i<data.length;i++){const t=data[i];e[t]?e[t]++:e[t]=1,e[t]>r&&(n=t,r=e[t])}return n}median(t){const e=this.extractNumerical(t);e.sort(((a,b)=>a-b));const n=Math.floor(e.length/2);return e.length%2?e[n]:(e[n-1]+e[n])/2}}},function(t,e,n){"use strict";class r{constructor(t,e){this.nodes={},this.apex=null,this.name=t,this.comparator=e}backup(){let t=new r(this.name,this.comparator);return t.nodes=JSON.parse(JSON.stringify(this.nodes)),t.apex=this.apex,t}restore(t){this.name=t.name,this.comparator=t.comparator,this.nodes=JSON.parse(JSON.stringify(t.nodes)),this.apex=t.apex}insert(t,e){if(t<=0)throw new Error("avl index ids are required to be numbers greater than zero");let n=this.nodes[t]={id:t,value:e,parent:null,balance:0,height:0,left:null,right:null,siblings:[]};this.apex?this.insertNode(this.nodes[this.apex],n):this.apex=t}insertNode(t,e){switch(this.comparator(e.value,t.value)){case 0:t.siblings.push(e.id),e.parent=t.id;break;case 1:t.right?(this.insertNode(this.nodes[t.right],e),this.updateBalance(t)):(t.right=e.id,e.parent=t.id,this.updateBalance(t));break;case-1:t.left?(this.insertNode(this.nodes[t.left],e),this.updateBalance(t)):(t.left=e.id,e.parent=t.id,this.updateBalance(t));break;default:throw new Error("Invalid comparator result")}if(t.balance<-1){if(null===t.left)throw new Error("insertNode.balance() : left child should not be null");this.nodes[t.left].balance<=0?this.leftLeftCase(t):this.leftRightCase(t)}if(t.balance>1){if(null===t.right)throw new Error("insertNode.balance() : right child should not be null");this.nodes[t.right].balance>=0?this.rightRightCase(t):this.rightLeftCase(t)}return t.height}updateBalance(t){let e=t.left?this.nodes[t.left].height:-1,hr=t.right?this.nodes[t.right].height:-1;t.height=e>hr?1+e:1+hr,t.balance=hr-e}leftLeftCase(t){return this.rotateRight(t)}leftRightCase(t){if(!t.left)throw new Error("leftRightCase: left child not set");return t.left=this.rotateLeft(this.nodes[t.left]).id,this.rotateRight(t)}rightRightCase(t){return this.rotateLeft(t)}rightLeftCase(t){if(!t.right)throw new Error("rightLeftCase: right child not set");return t.right=this.rotateRight(this.nodes[t.right]).id,this.rotateLeft(t)}rotateLeft(t){if(!t.right)throw new Error("rotateLeft: right child was unavailable.");let e=t.parent?this.nodes[t.parent]:null,n=this.nodes[t.right];if(t.right=n.left,t.right&&(this.nodes[t.right].parent=t.id),n.left=t.id,n.parent=t.parent,t.parent=n.id,e)if(e.left===t.id)e.left=n.id;else{if(e.right!==t.id)throw new Error("rotateLeft() : attempt to remap parent back to child failed... not found");e.right=n.id}else{if(this.apex!==t.id)throw new Error("rightRotate expecting parentless node to be apex");this.apex=n.id}return this.updateBalance(t),this.updateBalance(n),n}rotateRight(t){if(!t.left)throw new Error("rotateRight : left child unavailable");let e=t.parent?this.nodes[t.parent]:null,n=this.nodes[t.left];if(t.left=n.right,n.right&&(this.nodes[n.right].parent=t.id),n.right=t.id,n.parent=t.parent,t.parent=n.id,e)e.left===t.id?e.left=n.id:e.right=n.id;else{if(this.apex!==t.id)throw new Error("rightRotate expecting parentless node to be apex");this.apex=n.id}return this.updateBalance(t),this.updateBalance(n),n}getValuesAsTree(t){return null===this.apex?null:{id:(t=t||this.nodes[this.apex]).id,val:t.value,siblings:t.siblings,balance:t.balance,height:t.height,left:t.left?this.getValuesAsTree(this.nodes[t.left]):null,right:t.right?this.getValuesAsTree(this.nodes[t.right]):null}}update(t,e){let n=this.nodes[t];0!==this.comparator(n.value,e)&&(this.remove(t),this.insert(t,e))}remove(t){if(!this.apex)throw new Error("remove() : attempting remove when tree has no apex");this.removeNode(this.nodes[this.apex],t)}removeNode(t,e){if(!this.nodes[e])throw new Error("removeNode: attempting to remove a node which is not in hashmap");let n=this.nodes[e].value;switch(this.comparator(n,t.value)){case 0:if(t.siblings.length>0){if(t.id===e){let n=t.siblings.shift(),r=this.nodes[n];r.parent=t.parent,this.updateChildLink(t.parent,e,n),t.left&&(this.nodes[t.left].parent=n),t.right&&(this.nodes[t.right].parent=n),r.left=t.left,r.right=t.right,r.siblings=t.siblings,r.height=t.height,r.balance=t.balance,this.apex===e&&(this.apex=n);for(let t of r.siblings)this.nodes[t].parent=n;return void delete this.nodes[e]}{let n=t.siblings.indexOf(e);if(-1===n)throw new Error("Unable to remove sibling from parented sibling");return t.siblings.splice(n,1),void delete this.nodes[e]}}return t.left||t.right?t.left&&t.right?void this.promoteSuccessor(t):(t.left&&(this.promoteChild(t,this.nodes[t.left]),this.apex===e&&(this.apex=t.left)),void(t.right&&(this.promoteChild(t,this.nodes[t.right]),this.apex===e&&(this.apex=t.right)))):(this.updateChildLink(t.parent,t.id,null),delete this.nodes[e],void(e===this.apex&&(this.apex=null)));case 1:if(!t.right)throw new Error("removeNode: Unable to find value in tree");this.removeNode(this.nodes[t.right],e);break;case-1:if(!t.left)throw new Error("removeNode: Unable to find value in tree");this.removeNode(this.nodes[t.left],e)}if(this.updateBalance(t),t.balance<-1){if(null===t.left)throw new Error("insertNode.balance() : left child should not be null");this.nodes[t.left].balance<=0?this.leftLeftCase(t):this.leftRightCase(t)}if(t.balance>1){if(null===t.right)throw new Error("insertNode.balance() : right child should not be null");this.nodes[t.right].balance>=0?this.rightRightCase(t):this.rightLeftCase(t)}}updateChildLink(t,e,n){if(null===t)return;let r=this.nodes[t];r.left===e?r.left=n:r.right===e&&(r.right=n)}promoteChild(t,e){let n=t.parent;if(n){let r=this.nodes[n];r.left===t.id?r.left=e.id:r.right===t.id&&(r.right=e.id)}e.parent=n,delete this.nodes[t.id]}promoteSuccessor(t){let e=t.id;if(!t.right||!t.left)throw new Error("promoteSuccessor() : node to replace does not have two children");let n,r,o,l=null;if(t.balance<0){let e=this.nodes[t.left];l=this.findGreaterLeaf(e),n=l.id,r=l.value,o=l.siblings,l.siblings=[],this.removeNode(e,n)}else{let e=this.nodes[t.right];l=this.findLesserLeaf(e),n=l.id,r=l.value,o=l.siblings,l.siblings=[],this.removeNode(e,n)}if(t.parent){let p=this.nodes[t.parent];p.left===e&&(p.left=n),p.right===e&&(p.right=n)}t.left&&(this.nodes[t.left].parent=n),t.right&&(this.nodes[t.right].parent=n),t.id=n,t.value=r,t.siblings=o,this.nodes[n]=t,delete this.nodes[e],this.apex===e&&(this.apex=n),this.updateBalance(t)}findGreaterLeaf(t){if(!t.right)return t;let e=this.findGreaterLeaf(this.nodes[t.right]);return e||t}findLesserLeaf(t){if(!t.left)return t;let e=this.findLesserLeaf(this.nodes[t.left]);return e||t}rangeRequest(t){if(!this.apex)return[];if(!t)return this.collateIds(this.nodes[this.apex]);if("$eq"===t.op){let e=this.locate(this.nodes[this.apex],t.val);return null===e?[]:e.siblings.length?[e.id,...e.siblings]:[e.id]}return this.collateRequest(this.nodes[this.apex],t)}collateRequest(t,e){let n=[];if("$eq"===e.op)throw new Error("collateRequest does not support $eq range request");let r=this.comparator(t.value,e.val),o=0;if("$between"===e.op){if(null===e.high||void 0===e.high)throw new Error("collateRequest: $between request missing high range value");o=this.comparator(t.value,e.high)}if(t.left)switch(e.op){case"$lt":case"$lte":n=this.collateRequest(this.nodes[t.left],e);break;case"$gt":case"$gte":case"$between":1===r&&(n=this.collateRequest(this.nodes[t.left],e))}if(e)switch(e.op){case"$lt":-1===r&&(n.push(t.id),n.push(...t.siblings));break;case"$lte":-1!==r&&0!==r||(n.push(t.id),n.push(...t.siblings));break;case"$gt":1===r&&(n.push(t.id),n.push(...t.siblings));break;case"$gte":1!==r&&0!==r||(n.push(t.id),n.push(...t.siblings));break;case"$between":r>=0&&o<=0&&(n.push(t.id),n.push(...t.siblings))}else n.push(t.id),n.push(...t.siblings);if(t.right)if(e)switch(e.op){case"$lt":case"$lte":-1===r&&n.push(...this.collateRequest(this.nodes[t.right],e));break;case"$gt":case"$gte":n.push(...this.collateRequest(this.nodes[t.right],e));break;case"$between":-1===o&&n.push(...this.collateRequest(this.nodes[t.right],e))}else n.push(...this.collateRequest(this.nodes[t.right],e));return n}collateIds(t){let e=[];return t?(t.left&&(e=this.collateIds(this.nodes[t.left])),e.push(t.id),e.push(...t.siblings),t.right&&e.push(...this.collateIds(this.nodes[t.right])),e):[]}locate(t,e){for(;null!==t;)switch(this.comparator(e,t.value)){case 0:return t;case 1:if(!t.right)return null;t=this.nodes[t.right];break;case-1:if(!t.left)return null;t=this.nodes[t.left]}return null}validateIndex(){if(!this.apex)return 0===Object.keys(this.nodes).length;if(null!==this.nodes[this.apex].parent)return!1;let t=this.collateIds(this.nodes[this.apex]),e=Object.keys(this.nodes).length;if(t.length!==e)return!1;if(1===t.length)return null===this.nodes[t[0]].parent&&null===this.nodes[t[0]].left&&null===this.nodes[t[0]].right;for(let i=0;i<t.length-1;i++)if(1===this.comparator(this.nodes[t[i]].value,this.nodes[t[i+1]].value))return!1;return this.validateNode(this.nodes[this.apex])}validateNode(t){if(-1!==[t.parent,t.left,t.right].indexOf(t.id))return!1;let e=t.left?this.nodes[t.left].height:-1,hr=t.right?this.nodes[t.right].height:-1,n=1+Math.max(e,hr);if(t.height!==n)return!1;if(t.balance!==hr-e)return!1;if(t.siblings.length>0)for(let e of t.siblings)if(this.nodes[e].parent!==t.id)return!1;if(t.left){if(this.nodes[t.left].parent!==t.id)return!1;if(!this.validateNode(this.nodes[t.left]))return!1}if(t.right){if(this.nodes[t.right].parent!==t.id)return!1;if(!this.validateNode(this.nodes[t.right]))return!1}return!0}}n.d(e,"a",(function(){return o}));let o={avl:(t,e)=>new r(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(){this._events={},this._asyncListeners=!1}on(t,e){let n;return Array.isArray(t)?(t.forEach((t=>{this.on(t,e)})),e):(n=this._events[t],n||(n=this._events[t]=[]),n.push(e),e)}emit(t,...data){t&&this._events[t]&&this._events[t].forEach((t=>{this._asyncListeners?setTimeout((()=>{t(...data)}),1):t(...data)}))}addListener(t,e){return this.on(t,e)}removeListener(t,e){if(Array.isArray(t)&&t.forEach((t=>{this.removeListener(t,e)})),this._events[t]){const n=this._events[t];n.splice(n.indexOf(e),1)}}}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return f}));var r=n(5),o=n(3),l=n(1),h=n(0),c=n(4),_=n(2);function d(){if(void 0!==t&&(t.android||t.NSObject))return"NATIVESCRIPT";if(void 0!==t&&"[object process]"==={}.toString.call(t.process))return t.window,"NODEJS";if(void 0!==document)return-1===document.URL.indexOf("http://")&&-1===document.URL.indexOf("https://")?"CORDOVA":"BROWSER";if(void 0!==window&&"[object Window]"==={}.toString.call(window))return"BROWSER";throw SyntaxError("Unknown environment...")}class f extends r.a{constructor(t="loki.db",e={}){if(super(),this.databaseVersion=1.5,this.engineVersion=1.5,this._persistenceMethod=null,this._persistenceAdapter=null,this._throttledSaves=!0,this._throttledSaveRunning=null,this._throttledSavePending=null,this._autosave=!1,this._autosaveInterval=5e3,this._autosaveRunning=!1,this._autosaveHandler=Promise.resolve(),this.filename=t,this._collections=[],({serializationMethod:this._serializationMethod="normal",destructureDelimiter:this._destructureDelimiter="$<\n",env:this._env=d()}=e),this._events={init:[],loaded:[],flushChanges:[],close:[],changes:[],warning:[]},e.comparatorMap)for(let t in e.comparatorMap)h.a[t]=e.comparatorMap[t];if(e.rangedIndexFactoryMap)for(let t in e.rangedIndexFactoryMap)c.a[t]=e.rangedIndexFactoryMap[t];if(e.lokiOperatorPackageMap)for(let t in e.lokiOperatorPackageMap)_.a[t]=e.lokiOperatorPackageMap[t];this.on("init",this.clearChanges)}initializePersistence(t={}){let e=this._autosaveDisable();({autosave:this._autosave=!1,autosaveInterval:this._autosaveInterval=5e3,persistenceMethod:this._persistenceMethod,throttledSaves:this._throttledSaves=!0}=t);const n={NODEJS:["fs-storage"],BROWSER:["local-storage","indexed-storage"],CORDOVA:["local-storage","indexed-storage"],MEMORY:["memory-storage"]},r={"fs-storage":l.a.FSStorage,"local-storage":l.a.LocalStorage,"indexed-storage":l.a.IndexedStorage,"memory-storage":l.a.MemoryStorage};if(void 0!==this._persistenceMethod){if("function"!=typeof r[this._persistenceMethod])throw Error("Unknown persistence method.");this._persistenceAdapter=new r[this._persistenceMethod]}if(void 0!==t.adapter&&(this._persistenceMethod="adapter",this._persistenceAdapter=t.adapter),null===this._persistenceAdapter){let t=n[this._env];if(t)for(let i=0;i<t.length;i++)if(r[t[i]]){this._persistenceMethod=t[i],this._persistenceAdapter=new r[t[i]];break}}return t.autoload&&(e=e.then((()=>this._loadDatabase(t.inflate,!0)))),e.then((()=>{this._autosaveEnable()}))}copy(t={}){const e=new f(this.filename,{env:this._env});if(e.loadJSONObject(this,{retainDirtyFlags:!0}),t.removeNonSerializable){e._persistenceAdapter=null;for(let t=0;t<e._collections.length;t++)e._collections[t]._constraints=null,e._collections[t]._ttl=null}return e}addCollection(t,e={}){for(let i=0;i<this._collections.length;i++)if(this._collections[i].name===t)return this._collections[i];const n=new o.a(t,e);return this._collections.push(n),n}loadCollection(t){if(!t.name)throw new Error("Collection must have a name property to be loaded");this._collections.push(t)}getCollection(t){for(let i=0;i<this._collections.length;i++)if(this._collections[i].name===t)return this._collections[i];return this.emit("warning","collection "+t+" not found"),null}renameCollection(t,e){const n=this.getCollection(t);return n&&(n.name=e),n}listCollections(){const t=[];for(let i=0;i<this._collections.length;i++)t.push({name:this._collections[i].name,count:this._collections[i].count()});return t}removeCollection(t){for(let i=0;i<this._collections.length;i++)if(this._collections[i].name===t){const e=new o.a(t,{}),n=this._collections[i];for(const t in n)void 0!==n[t]&&void 0!==e[t]&&(n[t]=e[t]);return void this._collections.splice(i,1)}}serialize(t={}){switch(void 0===t.serializationMethod&&(t.serializationMethod=this._serializationMethod),t.serializationMethod){case"normal":default:return JSON.stringify(this);case"pretty":return JSON.stringify(this,null,2);case"destructured":return this.serializeDestructured()}}toJSON(){return{_env:this._env,_serializationMethod:this._serializationMethod,_autosave:this._autosave,_autosaveInterval:this._autosaveInterval,_collections:this._collections,databaseVersion:this.databaseVersion,engineVersion:this.engineVersion,filename:this.filename,_persistenceAdapter:this._persistenceAdapter,_persistenceMethod:this._persistenceMethod,_throttledSaves:this._throttledSaves}}serializeDestructured(t={}){if(void 0===t.partitioned&&(t.partitioned=!1),void 0===t.delimited&&(t.delimited=!0),void 0===t.delimiter&&(t.delimiter=this._destructureDelimiter),!0===t.partitioned&&void 0!==t.partition&&t.partition>=0)return this.serializeCollection({delimited:t.delimited,delimiter:t.delimiter,collectionIndex:t.partition});let e=new f(this.filename);e.loadJSONObject(this);for(let t=0;t<e._collections.length;t++)e._collections[t]._data=[];if(!0===t.partitioned&&-1===t.partition)return e.serialize({serializationMethod:"normal"});const n=[];n.push(e.serialize({serializationMethod:"normal"})),e=null;for(let e=0;e<this._collections.length;e++){let r=this.serializeCollection({delimited:t.delimited,delimiter:t.delimiter,collectionIndex:e});if(!1===t.partitioned&&!1===t.delimited){if(!Array.isArray(r))throw new Error("a nondelimited, non partitioned collection serialization did not return an expected array");for(let t=0;t<r.length;t++)n.push(r[t]),r[t]=null;n.push("")}else n.push(r)}return t.partitioned?(t.delimited,n):t.delimited?(n.push(""),n.join(t.delimiter)):(n.push(""),n)}serializeCollection(t={}){if(void 0===t.delimited&&(t.delimited=!0),void 0===t.collectionIndex)throw new Error("serializeCollection called without 'collectionIndex' option");const e=this._collections[t.collectionIndex].count();let n=[];for(let r=0;r<e;r++)n.push(JSON.stringify(this._collections[t.collectionIndex]._data[r]));return t.delimited?(n.push(""),n.join(t.delimiter)):n}deserializeDestructured(t,e={}){if(void 0===e.partitioned&&(e.partitioned=!1),void 0===e.delimited&&(e.delimited=!0),void 0===e.delimiter&&(e.delimiter=this._destructureDelimiter),e.partitioned){if(void 0!==e.partition)return-1===e.partition?JSON.parse(t[0]):this.deserializeCollection(t[e.partition+1],e);const n=JSON.parse(t[0]),r=n._collections.length;for(let o=0;o<r;o++)n._collections[o]._data=this.deserializeCollection(t[o+1],e);return n}let n=[];if(e.delimited){if(n=t.split(e.delimiter),t=null,0===n.length)return null}else n=t;const r=JSON.parse(n[0]),o=r._collections.length;n[0]=null;let l=0,h=1,c=!1;for(;!c;)""===n[h]?++l>o&&(c=!0):r._collections[l]._data.push(JSON.parse(n[h])),n[h++]=null;return r}deserializeCollection(t,e={}){void 0===e.partitioned&&(e.partitioned=!1),void 0===e.delimited&&(e.delimited=!0),void 0===e.delimiter&&(e.delimiter=this._destructureDelimiter);let n=[];e.delimited?(n=t.split(e.delimiter),n.pop()):n=t;for(let t=0;t<n.length;t++)n[t]=JSON.parse(n[t]);return n}loadJSON(t,e){let n;if(0===t.length)n={};else switch(this._serializationMethod){case"normal":case"pretty":default:n=JSON.parse(t);break;case"destructured":n=this.deserializeDestructured(t)}this.loadJSONObject(n,e)}loadJSONObject(t,e={}){const n=t._collections?t._collections.length:0;this.filename=t.filename,this._collections=[];for(let i=0;i<n;++i)this._collections.push(o.a.fromJSONObject(t._collections[i],e))}close(){return this._autosave?this._autosaveDisable().then((()=>this._autosaveDirty()?this.saveDatabase():Promise.resolve())):Promise.resolve().then((()=>{this.emit("close")}))}generateChangesNotification(t){let e=[];const n=t||this._collections.map((t=>t.name));return this._collections.forEach((t=>{-1!==n.indexOf(t.name)&&(e=e.concat(t.getChanges()))})),e}serializeChanges(t){return JSON.stringify(this.generateChangesNotification(t))}clearChanges(){this._collections.forEach((t=>{t.flushChanges&&t.flushChanges()}))}throttledSaveDrain(t={}){const e=(new Date).getTime();return this._throttledSaves?(void 0===t.recursiveWait&&(t.recursiveWait=!0),void 0===t.recursiveWaitLimit&&(t.recursiveWaitLimit=!1),void 0===t.recursiveWaitLimitDuration&&(t.recursiveWaitLimitDuration=2e3),void 0===t.started&&(t.started=new Date),this._throttledSaves&&null!==this._throttledSaveRunning?t.recursiveWait?Promise.resolve(Promise.all([this._throttledSaveRunning,this._throttledSavePending])).then((()=>null!==this._throttledSaveRunning||null!==this._throttledSavePending?t.recursiveWaitLimit&&e-t.started.getTime()>t.recursiveWaitLimitDuration?Promise.reject({}):this.throttledSaveDrain(t):Promise.resolve())):Promise.resolve(this._throttledSaveRunning):Promise.resolve()):Promise.resolve()}_loadDatabase(t={},e=!1){return null===this._persistenceAdapter?Promise.reject(new Error("persistenceAdapter not configured")):Promise.resolve(this._persistenceAdapter.loadDatabase(this.filename)).then((e=>{if("string"==typeof e)this.loadJSON(e,t),this.emit("load",this);else{if("object"!=typeof e||null===e||e instanceof Error)throw e;this.loadJSONObject(e,t),this.emit("load",this)}})).catch((t=>{if(t instanceof Error)throw t;if(null!=t)throw new TypeError("The persistence adapter did not load a serialized DB string or object.");if(!e)throw new Error("Database not found.")}))}loadDatabase(t={}){return this._throttledSaves?this.throttledSaveDrain(t).then((()=>(this._throttledSaveRunning=this._loadDatabase(t).then((()=>{this._throttledSaveRunning=null})),this._throttledSaveRunning)),(()=>{throw new Error("Unable to pause save throttling long enough to read database")})):this._loadDatabase(t)}_saveDatabase(){return null===this._persistenceAdapter?Promise.reject(new Error("persistenceAdapter not configured")):"reference"===this._persistenceAdapter.mode&&"function"==typeof this._persistenceAdapter.exportDatabase?Promise.resolve(this._persistenceAdapter.exportDatabase(this.filename,this.copy({removeNonSerializable:!0}))).then((()=>{this._autosaveClearFlags(),this.emit("save")})):(this._autosaveClearFlags(),Promise.resolve(this._persistenceAdapter.saveDatabase(this.filename,this.serialize())).then((()=>{this.emit("save")})))}saveDatabase(){return this._throttledSaves?(null!==this._throttledSaveRunning&&null===this._throttledSavePending&&(this._throttledSavePending=Promise.resolve(this._throttledSaveRunning).then((()=>(this._throttledSaveRunning=null,this._throttledSavePending=null,this.saveDatabase())))),null!==this._throttledSavePending?this._throttledSavePending:(this._throttledSaveRunning=this._saveDatabase().then((()=>{this._throttledSaveRunning=null})),this._throttledSaveRunning)):this._saveDatabase()}deleteDatabase(){return null===this._persistenceAdapter?Promise.reject(new Error("persistenceAdapter not configured")):Promise.resolve(this._persistenceAdapter.deleteDatabase(this.filename))}_autosaveDirty(){for(let t=0;t<this._collections.length;t++)if(this._collections[t]._dirty)return!0;return!1}_autosaveClearFlags(){for(let t=0;t<this._collections.length;t++)this._collections[t]._dirty=!1}_autosaveEnable(){if(!this._autosave||this._autosaveRunning)return;this._autosaveRunning=!0;const t=setInterval((()=>{this._autosaveRunning?this._autosaveDirty()&&(this._autosaveHandler=this._autosaveHandler.then((()=>this.saveDatabase()))):clearInterval(t)}),this._autosaveInterval)}_autosaveDisable(){return this._autosaveRunning=!1,this._autosaveHandler}}}).call(this,n(7))},function(t,e){var g;g=function(){return this}();try{g=g||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(g=window)}t.exports=g},function(t,e,n){"use strict";n.r(e);var r=n(6);n.d(e,"Loki",(function(){return r.a}));var o=n(3);n.d(e,"Collection",(function(){return o.a})),r.a.Collection=o.a,e.default=r.a}])},t.exports=r()},459:function(t,e,n){var r;"undefined"!=typeof self&&self,r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";(function(t){function r(){let e;return function(t){e=t}(void 0!==t&&t||this),e}n.d(e,"a",(function(){return o}));const o=function(){const t=r(),e=Symbol.for("LOKI");return void 0===t[e]&&(t[e]={}),t[e]}()}).call(this,n(2))},function(t,e,n){"use strict";function r(t){return t.split(/[\s]+/)}function o(t){return t.toLowerCase()}function l(t){return t.toUpperCase()}function h(t,e){if(t.char_filter)for(let n=0;n<t.char_filter.length;n++)e=t.char_filter[n](e);const n=t.tokenizer(e);if(t.token_filter)for(let i=0;i<n.length;i++)for(let e=0;e<t.token_filter.length;e++)n[i]=t.token_filter[e](n[i],i,n);return n.filter((t=>t))}n.r(e);class c{constructor(){this.tokenizer=r,this.token_filter=[o]}}function _(t){const e=[];for(let i=0;i<t.length;){const n=t.charCodeAt(i++);if(n>=55296&&n<=56319){const r=t.charCodeAt(i++);e.push(65536+(n-55296<<10)|r-56320)}else e.push(n)}return e}class d{constructor(t={}){this.docCount=0,this.docStore=new Map,this.totalFieldLength=0,this.root=new Map,({store:this._store=!0,optimizeChanges:this._optimizeChanges=!0,analyzer:this.analyzer=new c}=t)}insert(t,e){if(this.docStore.has(e))throw Error("Field already added.");const n=h(this.analyzer,t);if(0==n.length)return void this.docStore.set(e,{fieldLength:0});this.totalFieldLength+=n.length,this.docCount+=1,this.docStore.set(e,{fieldLength:n.length});const r=[];this._optimizeChanges&&Object.defineProperties(this.docStore.get(e),{indexRef:{enumerable:!1,configurable:!0,writable:!0,value:r}});for(const t of new Set(n)){let o=0;for(let e=0;e<n.length;e++)n[e]===t&&++o;let l=this.root;for(const e of _(t)){let t=l.get(e);void 0===t&&(t=new Map,this._optimizeChanges&&(t.pa=l),l.set(e,t)),l=t}void 0===l.dc&&(l.dc=new Map,l.df=0),l.dc.set(e,o),l.df+=1,r.push(l)}}remove(t){if(!this.docStore.has(t))return;const e=this.docStore.get(t);if(this.docStore.delete(t),0!==e.fieldLength)if(this.docCount-=1,this.totalFieldLength-=e.fieldLength,this._optimizeChanges){const n=e.indexRef;for(let e=0;e<n.length;e++){let r=n[e];if(r.df-=1,r.dc.delete(t),0===r.df){if(delete r.df,delete r.dc,0!==r.size)continue;do{const t=r.pa;delete r.pa;for(const e of t.keys())if(t.get(e)===r){t.delete(e);break}r=t}while(void 0!==r.pa&&0===r.size&&void 0===r.df)}}}else this._remove(this.root,t)}static getTermIndex(t,e,n=0){if(n>=t.length)return null;for(let i=n;i<t.length;i++){let n=e.get(t[i]);if(void 0===n)return null;e=n}return e}static extendTermIndex(t,e=[],n=[]){void 0!==t.df&&n.push({index:t,term:e.slice()}),e.push(0);for(const r of t)e[e.length-1]=r[0],d.extendTermIndex(r[1],e,n);return e.pop(),n}toJSON(){return this._store?{_store:!0,_optimizeChanges:this._optimizeChanges,docCount:this.docCount,docStore:[...this.docStore],totalFieldLength:this.totalFieldLength,root:d._serializeIndex(this.root)}:{_store:!1,_optimizeChanges:this._optimizeChanges}}static fromJSONObject(t,e){const n=new d({store:t._store,optimizeChanges:t._optimizeChanges,analyzer:e});return t._store&&(n.docCount=t.docCount,n.docStore=new Map(t.docStore),n.totalFieldLength=t.totalFieldLength,n.root=d._deserializeIndex(t.root)),n._optimizeChanges&&n._regenerate(n.root,null),n}static _serializeIndex(t){const e={};if(void 0!==t.dc&&(e.d={df:t.df,dc:[...t.dc]}),0===t.size)return e;const n=[],r=[];for(const e of t)n.push(e[0]),r.push(d._serializeIndex(e[1]));return e.k=n,e.v=r,e}static _deserializeIndex(t){const e=new Map;if(void 0!==t.k)for(let i=0;i<t.k.length;i++)e.set(t.k[i],d._deserializeIndex(t.v[i]));return void 0!==t.d&&(e.df=t.d.df,e.dc=new Map(t.d.dc)),e}_regenerate(t,e){null!==e&&(t.pa=e);for(const e of t.values())this._regenerate(e,t);if(void 0!==t.dc)for(const e of t.dc.keys()){const n=this.docStore.get(e);void 0===n.indexRef&&Object.defineProperties(n,{indexRef:{enumerable:!1,configurable:!0,writable:!0,value:[]}}),n.indexRef.push(t)}}_remove(t,e){for(const n of t)this._remove(n[1],e)&&t.delete(n[0]);return void 0!==t.df&&t.dc.has(e)&&(t.df-=1,t.dc.delete(e),0===t.df&&(delete t.df,delete t.dc)),0===t.size&&void 0===t.dc}}class f{constructor(t){this._cache={},this._invIdxs=t}setDirty(){this._cache={}}score(t,e,n,r,o,l,h=0){if(null===n||void 0===n.dc)return;const c=this._idf(t,h||n.df);for(const[h,_]of n.dc)o.has(h)||o.set(h,[]),!0===r?o.get(h).push({tf:_,idf:c,boost:e,fieldName:t,term:l}):!1===r?o.set(h,[{boost:e}]):o.set(h,[{boost:0}])}scoreConstant(t,e,n){return n.has(e)||n.set(e,[]),n.get(e).push({boost:t}),n}finalScore(t,e){const n={},r=void 0!==t.bm25?t.bm25.k1:1.2,b=void 0!==t.bm25?t.bm25.b:.75,o=void 0!==t.explain&&t.explain;for(const[t,l]of e){let e=0,h=[];for(let i=0;i<l.length;i++){const n=l[i];let c=0;if(void 0!==n.tf){const e=n.tf,l=f._calculateFieldLength(this._invIdxs[n.fieldName].docStore.get(t).fieldLength),_=this._avgFieldLength(n.fieldName),d=e*(r+1)/(e+r*(1-b+b*(l/_)));c=n.idf*d*n.boost,o&&h.push({boost:n.boost,score:c,docID:t,fieldName:n.fieldName,index:String.fromCharCode(...n.term),idf:n.idf,tfNorm:d,tf:e,fieldLength:l,avgFieldLength:_})}else c=n.boost,o&&h.push({boost:n.boost,score:c});e+=c}n[t]=o?{score:e,explanation:h}:{score:e}}return n}static _calculateFieldLength(t){return t}_getCache(t){if(void 0===this._cache[t]){const e=this._invIdxs[t].totalFieldLength/this._invIdxs[t].docCount;this._cache[t]={idfs:{},avgFieldLength:e}}return this._cache[t]}_idf(t,e){const n=this._getCache(t);return void 0!==n.idfs[e]?n.idfs[e]:n.idfs[e]=Math.log(1+(this._invIdxs[t].docCount-e+.5)/(e+.5))}_avgFieldLength(t){return this._getCache(t).avgFieldLength}}class m{constructor(t){const e=t.getNumStates();this._points=t.getStartPoints(),this._accept=new Array(e),this._transitions=new Array(e*this._points.length);for(let n=0;n<e;n++){this._accept[n]=t.isAccept(n);for(let e=0;e<this._points.length;e++)this._transitions[n*this._points.length+e]=t.step(n,this._points[e])}this._classmap=new Array(256);for(let i=0,t=0;t<this._classmap.length;t++)i+1<this._points.length&&t===this._points[i+1]&&i++,this._classmap[t]=i}getCharClass(t){let a=0,b=this._points.length;for(;b-a>1;){const e=a+b>>>1;if(this._points[e]>t)b=e;else{if(!(this._points[e]<t))return e;a=e}}return a}step(t,e){return e>=this._classmap.length?this._transitions[t*this._points.length+this.getCharClass(e)]:this._transitions[t*this._points.length+this._classmap[e]]}isAccept(t){return this._accept[t]}}const w=1114111;function v(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:a[1]<b[1]?-1:a[1]>b[1]?1:a[2]<b[2]?-1:a[2]>b[2]?1:0}function y(a,b){return a[1]<b[1]?-1:a[1]>b[1]?1:a[2]<b[2]?-1:a[2]>b[2]?1:a[0]<b[0]?-1:a[0]>b[0]?1:0}class x{constructor(){this._stateTransitions=[],this._stateTransitions=[],this._accept=new Set,this._nextState=0,this._currState=-1,this._transitions={}}isAccept(t){return this._accept.has(t)}createState(){return this._nextState++}setAccept(t,e){e?this._accept.add(t):this._accept.delete(t)}finishState(){-1!==this._currState&&(this._finishCurrentState(),this._currState=-1)}_finishCurrentState(){this._stateTransitions.sort(v);let t=0,p=[-1,-1,-1];for(let i=0,e=this._stateTransitions.length;i<e;i++){let e=this._stateTransitions[i];p[0]===e[0]?e[1]<=p[2]+1?e[2]>p[2]&&(p[2]=e[2]):(-1!==p[0]&&(this._stateTransitions[t][0]=p[0],this._stateTransitions[t][1]=p[1],this._stateTransitions[t][2]=p[2],t++),p[1]=e[1],p[2]=e[2]):(-1!==p[0]&&(this._stateTransitions[t][0]=p[0],this._stateTransitions[t][1]=p[1],this._stateTransitions[t][2]=p[2],t++),p[0]=e[0],p[1]=e[1],p[2]=e[2])}-1!==p[0]&&(this._stateTransitions[t][0]=p[0],this._stateTransitions[t][1]=p[1],this._stateTransitions[t][2]=p[2],t++),this._transitions[this._currState]=this._stateTransitions.slice(0,t).sort(y),this._stateTransitions=[]}getStartPoints(){const t=new Set;t.add(0);const e=Object.keys(this._transitions);for(let i=0;i<e.length;i++){let n=this._transitions[e[i]];for(let e=0;e<n.length;e++){let r=n[e];t.add(r[1]),r[2]<w&&t.add(r[2]+1)}}return Array.from(t).sort(((a,b)=>a-b))}step(t,label){let e=this._transitions[t];if(e)for(let i=0;i<e.length;i++){let t=e[i];if(t[1]<=label&&label<=t[2])return t[0]}return-1}getNumStates(){return this._nextState}addTransition(source,t,e,n){this._currState!==source&&(-1!==this._currState&&this._finishCurrentState(),this._currState=source),this._stateTransitions.push([t,e,n])}}class S{constructor(t=0,e=0){this._low=t,this._high=e}shiftRight(t){return 0==(t&=63)?this:t<32?new S(this._low>>>t|this._high<<32-t,this._high>>t):new S(this._high>>t-32,this._high>=0?0:-1)}shiftLeft(t){return 0==(t&=63)?this:t<32?new S(this._low<<t,this._high<<t|this._low>>>32-t):new S(0,this._low<<t-32)}and(t){return new S(this._low&t._low,this._high&t._high)}toInt(){return this._low}}const k=[new S(1),new S(3),new S(7),new S(15),new S(31),new S(63),new S(127),new S(255),new S(511),new S(1023),new S(2047),new S(4095),new S(8191),new S(16383),new S(32767),new S(65535),new S(15,8191),new S(15,16383),new S(15,32767),new S(15,65535),new S(255,8191),new S(255,16383),new S(255,32767),new S(255,65535),new S(4095,8191),new S(4095,16383),new S(4095,32767),new S(4095,65535),new S(65535,8191),new S(65535,16383),new S(65535,32767),new S(65535,65535),new S(1048575,8191),new S(1048575,16383),new S(1048575,32767),new S(1048575,65535),new S(16777215,8191),new S(16777215,16383),new S(16777215,32767),new S(16777215,65535),new S(268435455,8191),new S(268435455,16383),new S(268435455,32767),new S(268435455,65535),new S(4294967295,8191),new S(4294967295,16383),new S(4294967295,32767),new S(4294967295,65535),new S(68719476735,8191),new S(68719476735,16383),new S(68719476735,32767),new S(68719476735,65535),new S(0xffffffffff,8191),new S(0xffffffffff,16383),new S(0xffffffffff,32767),new S(0xffffffffff,65535),new S(0xfffffffffff,8191),new S(0xfffffffffff,16383),new S(0xfffffffffff,32767),new S(0xfffffffffff,65535),new S(0xffffffffffff,8191),new S(0xffffffffffff,16383),new S(0xffffffffffff,32767)];class I{constructor(t,e,n){this._w=t,this._n=e,this._minErrors=n}size(){return this._minErrors.length*(this._w+1)}isAccept(t){let e=Math.floor(t/(this._w+1)),n=t%(this._w+1);return this._w-n+this._minErrors[e]<=this._n}getPosition(t){return t%(this._w+1)}static unpack(data,t,e){const n=e*t,r=n>>6,o=63&n;if(o+e<=64)return data[r].shiftRight(o).and(k[e-1]).toInt();{const t=64-o;return data[r].shiftRight(o).and(k[t-1]).toInt()+data[1+r].and(k[e-t-1]).shiftLeft(t).toInt()}}}const C=[new S(2)],O=[new S(0)],D=[new S(2627)],M=[new S(56)],R=[new S(2182348803,877873428),new S(109)],A=[new S(1436680192,21845)],N=[new S(2416705539,559024212),new S(1161073005,1531779490),new S(55860)],P=[new S(553385984,1431678474),new S(1431655765)];class z extends I{constructor(t){super(t,1,[0,1,0,-1,-1,-1])}transition(t,e,n){let r=Math.floor(t/(this._w+1)),o=t%(this._w+1);if(e===this._w){if(r<2){const t=2*n+r;o+=I.unpack(O,t,1),r=I.unpack(C,t,2)-1}}else if(e===this._w-1){if(r<3){const t=3*n+r;o+=I.unpack(M,t,1),r=I.unpack(D,t,2)-1}}else if(e===this._w-2){if(r<6){const t=6*n+r;o+=I.unpack(A,t,2),r=I.unpack(R,t,3)-1}}else if(r<6){const t=6*n+r;o+=I.unpack(P,t,2),r=I.unpack(N,t,3)-1}return-1===r?-1:r*(this._w+1)+o}}const j=[new S(35)],T=[new S(0)],$=[new S(325618500)],E=[new S(992)],F=[new S(1375778052,1625010352),new S(654713383,1379082614),new S(338833973,592794674),new S(17236)],L=[new S(8192,1431339176),new S(1431655765,85)],V=[new S(1074107396,3875651625),new S(10813440,2685408800),new S(2705416840,2955709504),new S(822630592,176295986),new S(220770817,826549144),new S(2222426336,1384244520),new S(146941966,2721677523),new S(2841782156,506631345),new S(579396904,2353082526),new S(35310113,289686537),new S(2259748971,295985736),new S(492978372,711088276),new S(1217426605,1344578827),new S(1376534810,344070858),new S(190401092,1485354377),new S(3289490533,2484954400),new S(2909430484,2337837173),new S(441472420)],J=[new S(8192,3195650),new S(3288085308,704655603),new S(2189600800,591003698),new S(850559912,1431655765),new S(1431655765,1431655765),new S(1431655765,1431655765),new S(1431655765,1431655765)],B=[new S(2904068,58725456),new S(3640,3305111883),new S(1363153922,1300),new S(0),new S(335609856,85458955),new S(685900336,166838792),new S(2198499522,564071920),new S(136348160,2181038210),new S(1619003392,134546689),new S(39855683,813828486),new S(1347453028,1164181826),new S(536873009,139461908),new S(2231378050,1094735904),new S(160481793,1164017816),new S(1352667217,137456908),new S(84799712,558175264),new S(340820500,219423040),new S(1350704224,1008844824),new S(3407093895,30086147),new S(407994924,2148016453),new S(545259552,2097672),new S(2266497861,3490060320),new S(613903113,3406463435),new S(1648822737,145860110),new S(2183434377,38340640),new S(13811748,3272876486),new S(356860963,1009861909),new S(3256660288,830815266),new S(740327956,1158959115),new S(1351286865,141656116),new S(1359540421,2999666001),new S(481339408,3894702429),new S(2425032288,337824532),new S(3224154437,813771810),new S(212943372,2216698370),new S(550373456,1545653768),new S(2332913858,545392672),new S(337723912,1107841154),new S(1350765600,153125696),new S(325399954,3323153862),new S(1841617741,3540595740),new S(1423134004,1680136456),new S(50861250,2449943586),new S(614664496,1109422667),new S(633938146,611374880),new S(2539425922,2462657904),new S(76697096,3406332098),new S(3259769985,1165203240),new S(3663819994,3336195509),new S(1563465501,1264399831),new S(2474794210,271614300),new S(34386245,1363419217),new S(740429356,3308790030),new S(1389038960,139543060),new S(2232701250,541788240),new S(1079067660,2450874499),new S(2785961365,1298533965),new S(476956248,2497254628),new S(341103461,2187601497),new S(1359153171,680658732),new S(3408700171,3804373106),new S(542345488,1160540375),new S(1888368785,145935149),new S(3255087694,2177569856),new S(683854372,3661947790),new S(2245419236,499571301),new S(2388496718,3804978483),new S(949191224)],U=[new S(524288,805437440),new S(2146400),new S(67108864,2169044992),new S(276973604,1076138561),new S(1610621058,3680514243),new S(807079296,1815527532),new S(897243,2954387888),new S(2441666669,460338720),new S(114847159,134255104),new S(37758096,76680228),new S(136613897,4784130),new S(672286724,1225265793),new S(306857122,880804100),new S(220463628,3272159376),new S(616713508,1073781257),new S(2449540634,77089286),new S(1898353250,1229784210),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,9362)],K=[new S(2904068,58725456),new S(3640,3305111883),new S(1363153922,1300),new S(0),new S(335609856,85196811),new S(59637984,5570560),new S(100708736,642062416),new S(136348168,2181570690),new S(1082263584,181504),new S(2156659014,1887570488),new S(2620424828,3279691970),new S(545261671,2130440),new S(33562752,2973765664),new S(5341184,2190352419),new S(547298336,137406220),new S(2235429087,1363481680),new S(340820500,370417986),new S(813715536,1613103716),new S(1124606104,621086726),new S(341196820,1107296387),new S(545587281,139461128),new S(336856450,2157513760),new S(136714249,2181140994),new S(2416314689,143787289),new S(3257709122,575218834),new S(23218476,1124599045),new S(2248302630,2151761173),new S(3316920642,935559200),new S(340819988,1107841157),new S(1350893649,21053528),new S(2550763714,1363501440),new S(206610448,3758633325),new S(1351295472,743623468),new S(3257709129,1611476114),new S(407929372,2268864960),new S(63640608,738315028),new S(1159221634,545261601),new S(136347648,1157636098),new S(545724419,141559316),new S(84419023,1946484981),new S(408981504,2471335494),new S(813845808,1277481805),new S(3321943618,25561121),new S(635093620,3265295049),new S(2445440114,745112472),new S(2300846658,2453800992),new S(883951872,2181591424),new S(2963079265,481446262),new S(2635903144,1625695344),new S(359976510,3541325271),new S(633494900,476056888),new S(1111241026,1364284500),new S(335790868,3257672139),new S(558045267,11715080),new S(85217605,54855856),new S(206604056,1427443855),new S(4060419156,141821184),new S(102297744,3797110162),new S(1704116792,1228416601),new S(566624470,1143194388),new S(3408729413,1925357634),new S(2693907828,1110194563),new S(1351298130,11715860),new S(2150936715,4039444593),new S(1162957064,2819666635),new S(1901927600,576776228),new S(2385343694,3864603731),new S(949191224,1108095105),new S(570559665,139494432),new S(3456639182,1891785760),new S(136350477,1107828866),new S(1350702113,203440648),new S(2200719491,554174592),new S(137937428,2768779394),new S(2848166960,2863311530),new S(2678717098,447381162),new S(337691400,2185765072),new S(2228833636,1904530289),new S(460404435,885148935),new S(355783501,2567517762),new S(818021680,137626888),new S(1398349970,886858038),new S(1303698529,2759444188),new S(1227133514,2450169746),new S(2173872170,1925324848),new S(814942496,119845450),new S(2450400290,225575516),new S(3372753479,2463566197),new S(618694956,2282496073),new S(3259505840,747801636),new S(2299037513,2158306440),new S(2865185684,1787173674),new S(2871505528,135998630),new S(120332803,2735288466),new S(1763036764,3614016979),new S(1998285110,1567933020),new S(2301457623,1917716851),new S(142656005,1277460939),new S(1939286210,1635048005),new S(3662525914,1252095430),new S(2252890502,1787206439),new S(813795018,212944144),new S(1142968578,571354193),new S(941690412,3406655685),new S(1363285074,340869640),new S(1258836101,1363414048),new S(339772204,3407106312),new S(1217071240,2486264328),new S(2675866051,4205477370),new S(2124930941,50862570),new S(550507601,1701086552),new S(2473165721,2517850499),new S(956767089,3647288901),new S(2521109812,81828105),new S(85213378,559286324),new S(1625708889,3596674266),new S(3336332676,2449992057),new S(3750905888,2821358087),new S(271614374,2300605125),new S(2999595186,740427564),new S(87593230,1388776818),new S(149129492,2334962391),new S(541795552,481379340),new S(2351735368,2269850802),new S(608733960,1133805922),new S(2602532471,2658691750),new S(3970345447,1359153177),new S(680658732,2386076427),new S(2207475987,1771444057),new S(1161328411,1959672182),new S(149130029,3255099982),new S(2177569856,683854372),new S(3661947790,2245419236),new S(1975966309,1770391529),new S(2582087242,2798283430)],W=[new S(524288,805437440),new S(2146400),new S(67108864,16777216),new S(1348481048,3681400539),new S(11702,2759852034),new S(1092883008,306782344),new S(1065248,1073742080),new S(2450071634,613598240),new S(157651673,204527616),new S(3277862616,2954562566),new S(1815534349,409731075),new S(2954587142,2911241057),new S(1533925085,905970103),new S(230032140,3289526556),new S(3068358150,56077),new S(3674310171,152604166),new S(1907829602,7198427),new S(8390944,1076101705),new S(2420711618,545409280),new S(1074040832,302064768),new S(2760925472,1428467018),new S(38273045,1083326496),new S(1212191753,2454856978),new S(603981856,1226838017),new S(541721760,689080612),new S(349513,2416455890),new S(616710196,154440460),new S(40379539,68708608),new S(1629493832,2588509714),new S(894585300,204767233),new S(2483889154,616827184),new S(153412173,440402074),new S(110231814,1644468298),new S(2456888978,2454277460),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756,1227133513),new S(2454267026,613566756),new S(1227133513,2454267026),new S(613566756)];class Q extends I{constructor(t){super(t,2,[0,2,1,0,1,0,-1,0,0,-1,0,-1,-1,-1,-1,-1,-2,-1,-1,-1,-2,-1,-1,-2,-1,-1,-2,-1,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2,-2])}transition(t,e,n){let r=Math.floor(t/(this._w+1)),o=t%(this._w+1);if(e===this._w){if(r<3){const t=3*n+r;o+=I.unpack(T,t,1),r=I.unpack(j,t,2)-1}}else if(e===this._w-1){if(r<5){const t=5*n+r;o+=I.unpack(E,t,1),r=I.unpack($,t,3)-1}}else if(e===this._w-2){if(r<13){const t=13*n+r;o+=I.unpack(L,t,2),r=I.unpack(F,t,4)-1}}else if(e===this._w-3){if(r<28){const t=28*n+r;o+=I.unpack(J,t,2),r=I.unpack(V,t,5)-1}}else if(e===this._w-4){if(r<45){const t=45*n+r;o+=I.unpack(U,t,3),r=I.unpack(B,t,6)-1}}else if(r<45){const t=45*n+r;o+=I.unpack(W,t,3),r=I.unpack(K,t,6)-1}return-1===r?-1:r*(this._w+1)+o}}class H{constructor(input,t){this._word=input,this._editDistance=t,this._alphabet=[...new Set(this._word)].sort(((a,b)=>a-b)),this._numRanges=0,this._rangeLower=new Array(this._alphabet.length+2),this._rangeUpper=new Array(this._alphabet.length+2);let e=0;for(let i=0;i<this._alphabet.length;i++){const t=this._alphabet[i];t>e&&(this._rangeLower[this._numRanges]=e,this._rangeUpper[this._numRanges]=t-1,this._numRanges++),e=t+1}e<=w&&(this._rangeLower[this._numRanges]=e,this._rangeUpper[this._numRanges]=w,this._numRanges++),this._description=1===t?new z(input.length):new Q(input.length)}toAutomaton(){let t=new x;const e=2*this._editDistance+1,n=this._description.size();t.createState();for(let i=1;i<n;i++){let e=t.createState();t.setAccept(e,this._description.isAccept(i))}for(let r=0;r<n;r++){const n=this._description.getPosition(r);if(n<0)continue;const o=n+Math.min(this._word.length-n,e);for(let e=0;e<this._alphabet.length;e++){const l=this._alphabet[e],h=this._getVector(l,n,o),c=this._description.transition(r,n,h);c>=0&&t.addTransition(r,c,l,l)}const l=this._description.transition(r,n,0);if(l>=0)for(let e=0;e<this._numRanges;e++)t.addTransition(r,l,this._rangeLower[e],this._rangeUpper[e])}return t.finishState(),t}_getVector(t,e,n){let r=0;for(let i=e;i<n;i++)r<<=1,this._word[i]===t&&(r|=1);return r}}function G(t,e){if(void 0===e)return 1;if("number"==typeof e)return e<0?t+e:e;let n=t;if(e.includes("<")){for(const s of e.split(" ")){const e=s.split("<");if(t<=parseInt(e[0]))return n;n=G(t,e[1])}return n}if(e.includes("%")){const t=n*parseInt(e.slice(0,-1))*.01;n=t<0?n+Math.ceil(t):Math.floor(t)}else{const t=parseInt(e);n=t<0?n+t:t}return n<1?1:n}class Y{constructor(t,e){this._invIdxs=t,this._docs=e,this._scorer=new f(this._invIdxs)}search(t){let e=this._recursive(t.query,!0);if(void 0===t.calculate_scoring||t.calculate_scoring)return this._scorer.finalScore(t,e);const n={};for(const t of e.keys())n[t]={score:1};return n}setDirty(){this._scorer.setDirty()}_recursive(t,e){let n=new Map;const r=void 0!==t.boost?t.boost:1,o=void 0!==t.field?t.field:null;let l=null,c=null;switch(void 0!==this._invIdxs[o]&&(l=this._invIdxs[o].root,c=this._invIdxs[o].analyzer),t.type){case"bool":if(n=null,void 0!==t.must&&(n=this._getUnique(t.must,e,n)),void 0!==t.filter&&(n=this._getUnique(t.filter,null,n)),void 0!==t.should){const r=this._getAll(t.should,e);let o=!1;null===n&&(o=!0,n=new Map);const l=Math.max(1,G(t.should.length,t.minimum_should_match));if(o&&1===l)n=r;else for(const[t,e]of r)e.length>=l&&(n.has(t)?n.get(t).push(...e):o?n.set(t,e):n.delete(t))}if(null===n&&(n=this._recursive({type:"match_all"},!1)),void 0!==t.not){let e=this._getAll(t.not,null);for(const t of e.keys())n.has(t)&&n.delete(t)}if(1!==r)for(const[t,e]of n)for(let i=0;i<e.length;i++)e[i].boost*=r;break;case"term":{const h=_(t.value);let c=d.getTermIndex(h,l);this._scorer.score(o,r,c,e,n,h);break}case"terms":for(let i=0;i<t.value.length;i++){const h=_(t.value[i]);let c=d.getTermIndex(h,l);this._scorer.score(o,r,c,e,n,h)}break;case"fuzzy":{const[h,c]=function(t,e){let n=_(t.value),r=void 0!==t.fuzziness?t.fuzziness:"AUTO";"AUTO"===r&&(r=n.length<=2?0:n.length<=5?1:2);let o=void 0!==t.prefix_length?t.prefix_length:0,l=void 0!==t.extended&&t.extended;0===r&&(o=n.length);let h=[],c=e,f=n.slice(0,o),w=n,v=0;if(0!==o&&(c=d.getTermIndex(f,c),w=w.slice(o)),null===c)return[h,v];if(0===w.length){if(l){const t=d.extendTermIndex(c);for(let i=0;i<t.length;i++)h.push({index:t[i].index,term:t[i].term,boost:1}),v=Math.max(v,t[i].index.df)}else void 0!==c.dc&&(h.push({index:c,term:n,boost:1}),v=c.df);return[h,v]}const y=[0],x=new m(new H(w,r).toAutomaton());function S(t,e,n){let o=0;if(-1!==(t=x.step(t,0))&&x.isAccept(t)&&(o++,-1!==(t=x.step(t,0))&&x.isAccept(t)&&o++,e.length<n.length)){if(o!==r)return function(a,b){let i,t,e,n;const r=Array(a.length+1);for(i=0;i<=a.length;i++)r[i]=i;for(i=1;i<=b.length;i++){for(e=i,t=1;t<=a.length;t++)b[i-1]===a[t-1]?n=r[t-1]:(n=Math.min(r[t-1]+1,Math.min(e+1,r[t]+1)),i>1&&t>1&&b[i-2]===a[t-1]&&a[t-2]===b[i-1]&&(n=Math.min(n,r[t-1]-(a[t-1]===b[i-1]?1:0)))),r[t-1]=e,e=n;r[a.length]=e}return r[a.length]}(e,n);o-=n.length-e.length}return r-o}function k(t,e,r){if(y[y.length-1]=e,-1!==(t=x.step(t,e))){if(x.isAccept(t)){if(l){const t=d.extendTermIndex(r);for(let i=0;i<t.length;i++)h.push({index:t[i].index,term:t[i].term,boost:1}),v=Math.max(v,t[i].index.df);return}if(void 0!==r.df){const e=S(t,y,w),o=Math.max(0,1-e/Math.min(f.length+y.length,n.length));h.push({index:r,term:[...f,...y],boost:o}),v=Math.max(v,r.df)}}y.push(0);for(const e of r)k(t,e[0],e[1]);y.pop()}}for(const t of c)k(0,t[0],t[1]);return[h,v]}(t,l);for(let i=0;i<h.length;i++)this._scorer.score(o,r*h[i].boost,h[i].index,e,n,h[i].term,c);break}case"wildcard":{const h=void 0!==t.enable_scoring&&t.enable_scoring,c=function(t,e){let n=_(t.value),r=[];function o(t,e=0,l=[],h=!1){if(null!==t)if(e!==n.length)if(h||92!==n[e])if(h||63!==n[e])if(h||42!==n[e])o(d.getTermIndex([n[e]],t),e+1,[...l,n[e]]);else if(e+1===n.length){const n=d.extendTermIndex(t);for(let i=0;i<n.length;i++)o(n[i].index,e+1,[...l,...n[i].term])}else{o(t,e+1,l,!1);const n=[{index:t,term:[]}];do{const t=n.pop();for(const r of t.index)o(r[1],e+1,[...l,...t.term,r[0]]),n.push({index:r[1],term:[...t.term,r[0]]})}while(0!==n.length)}else for(const n of t)o(n[1],e+1,[...l,n[0]]);else o(t,e+1,l,!0);else void 0!==t.df&&r.push({index:t,term:l.slice()})}return o(e),r}(t,l);for(let i=0;i<c.length;i++)this._scorer.score(o,r,c[i].index,e&&h,n,c[i].term);break}case"match_all":for(let t of this._docs)this._scorer.scoreConstant(r,t,n);break;case"constant_score":{let e=this._getAll(t.filter,!1);for(const t of e.keys())this._scorer.scoreConstant(r,t,n);break}case"prefix":{const h=void 0!==t.enable_scoring&&t.enable_scoring,c=_(t.value),f=d.getTermIndex(c,l);if(null!==f){const t=d.extendTermIndex(f);for(let i=0;i<t.length;i++)this._scorer.score(o,r,t[i].index,e&&h,n,[...c,...t[i].term])}break}case"exists":if(null!==l)for(const t of this._invIdxs[o].docStore.keys())this._scorer.scoreConstant(r,t,n);break;case"match":{const l=h(c,t.value),_={type:"bool"},d=[];if("or"===(void 0!==t.operator?t.operator:"or")?(void 0!==t.minimum_should_match&&(_.minimum_should_match=t.minimum_should_match),_.should=d):_.must=d,_.boost=r,void 0!==t.fuzziness){let e=void 0!==t.prefix_length?t.prefix_length:2,n=void 0!==t.extended&&t.extended;for(let i=0;i<l.length;i++)d.push({type:"fuzzy",field:o,value:l[i],fuzziness:t.fuzziness,prefix_length:e,extended:n})}else for(let i=0;i<l.length;i++)d.push({type:"term",field:o,value:l[i]});n=this._recursive(_,e);break}}return n}_getUnique(t,e,n){if(0===t.length)return n;for(let i=0;i<t.length;i++){let r=this._recursive(t[i],e);if(null!==n)for(const t of n.keys())r.has(t)?n.get(t).push(...r.get(t)):n.delete(t);else n=this._recursive(t[0],e)}return n}_getAll(t,e,n=new Map){for(let i=0;i<t.length;i++){let r=this._recursive(t[i],e);for(const t of r.keys())n.has(t)?n.get(t).push(...r.get(t)):n.set(t,r.get(t))}return n}}var X=n(0);class Z{constructor(t=[],e){this._invIdxs={};for(let i=0;i<t.length;i++){let e=t[i];this._invIdxs[e.field]=new d(e)}this._id=e,this._docs=new Set,this._idxSearcher=new Y(this._invIdxs,this._docs)}static register(){X.a.FullTextSearch=Z}addDocument(t,e=t[this._id]){let n=Object.keys(this._invIdxs);for(let r,i=0;n.length,r=n[i];i++){let n=t[r];if(null!=n){if("string"!=typeof n){if("number"!=typeof n)throw TypeError("Unsupported field type for full text search.");n=n.toString()}this._invIdxs[r].insert(n,e)}}this._docs.add(e),this._idxSearcher.setDirty()}removeDocument(t,e=t[this._id]){let n=Object.keys(this._invIdxs);for(let i=0;i<n.length;i++)this._invIdxs[n[i]].remove(e);this._docs.delete(e),this._idxSearcher.setDirty()}updateDocument(t,e=t[this._id]){this.removeDocument(t,e),this.addDocument(t,e)}clear(){for(let t of this._docs)this.removeDocument(null,t)}search(t){return this._idxSearcher.search(t)}toJSON(){let t={id:this._id,ii:{}},e=Object.keys(this._invIdxs);for(let i=0;i<e.length;i++){const n=e[i];t.ii[n]=this._invIdxs[n].toJSON()}return t}static fromJSONObject(t,e={}){let n=new Z([],t.id),r=Object.keys(t.ii);for(let i=0;i<r.length;i++){const o=r[i];n._invIdxs[o]=d.fromJSONObject(t.ii[o],e[o])}return n}}n.d(e,"FullTextSearch",(function(){return Z})),n.d(e,"analyze",(function(){return h})),n.d(e,"StandardAnalyzer",(function(){return c})),n.d(e,"whitespaceTokenizer",(function(){return r})),n.d(e,"lowercaseTokenFilter",(function(){return o})),n.d(e,"uppercaseTokenFilter",(function(){return l})),Z.Analyzer={},Z.Analyzer.analyze=h,Z.Analyzer.StandardAnalyzer=c,Z.Tokenizer={},Z.Tokenizer.whitespaceTokenizer=r,Z.TokenFilter={},Z.TokenFilter.lowercaseTokenFilter=o,Z.TokenFilter.uppercaseTokenFilter=l,e.default=Z},function(t,e){var g;g=function(){return this}();try{g=g||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(g=window)}t.exports=g}])},t.exports=r()},464:function(t,e,n){"use strict";n.r(e);var r=n(30),o=(n(11),n(24),n(49),n(25),n(31),n(65),n(110),n(197),n(199),n(109),n(449)),l=n.n(o),h=n(458),c=n.n(h),_=n(459);n.n(_).a.register();var d,f,m=["/","/datasets","/heatmaps","/interactions","/umap","/interactions/cs13","/interactions/cs14","/interactions/cs16","/interactions/umap","/datasets/datasets","/umap/umap_he1","/umap/umap_niche2","/interactions/cs13/dorsal_inner_to_dorsal_outer","/interactions/cs13/dorsal_inner_to_gonadal_epithelium_inner","/interactions/cs13/dorsal_inner_to_dorsal_inner","/interactions/cs13/dorsal_inner_to_gonadal_epithelium_outer","/interactions/cs13/dorsal_inner_to_ventral_inner","/interactions/cs13/dorsal_inner_to_ventral_outer","/interactions/cs13/dorsal_outer_to_dorsal_inner","/interactions/cs13/dorsal_outer_to_dorsal_outer","/interactions/cs13/dorsal_outer_to_gonadal_epithelium_inner","/interactions/cs13/dorsal_outer_to_ventral_inner","/interactions/cs13/dorsal_outer_to_gonadal_epithelium_outer","/interactions/cs13/dorsal_outer_to_ventral_outer","/interactions/cs13/gonadal_epithelium_inner_to_dorsal_inner","/interactions/cs13/gonadal_epithelium_inner_to_dorsal_outer","/interactions/cs13/gonadal_epithelium_inner_to_gonadal_epithelium_inner","/interactions/cs13/gonadal_epithelium_inner_to_gonadal_epithelium_outer","/interactions/cs13/gonadal_epithelium_inner_to_ventral_inner","/interactions/cs13/gonadal_epithelium_inner_to_ventral_outer","/interactions/cs13/gonadal_epithelium_outer_to_dorsal_inner","/interactions/cs13/gonadal_epithelium_outer_to_dorsal_outer","/interactions/cs13/gonadal_epithelium_outer_to_gonadal_epithelium_inner","/interactions/cs13/gonadal_epithelium_outer_to_gonadal_epithelium_outer","/interactions/cs13/gonadal_epithelium_outer_to_ventral_inner","/interactions/cs13/gonadal_epithelium_outer_to_ventral_outer","/interactions/cs13/ventral_inner_to_dorsal_inner","/interactions/cs13/ventral_inner_to_dorsal_outer","/interactions/cs13/ventral_inner_to_gonadal_epithelium_inner","/interactions/cs13/ventral_inner_to_gonadal_epithelium_outer","/interactions/cs13/ventral_inner_to_ventral_inner","/interactions/cs13/ventral_inner_to_ventral_outer","/interactions/cs13/ventral_outer_to_dorsal_inner","/interactions/cs13/ventral_outer_to_dorsal_outer","/interactions/cs13/ventral_outer_to_gonadal_epithelium_inner","/interactions/cs13/ventral_outer_to_gonadal_epithelium_outer","/interactions/cs13/ventral_outer_to_ventral_inner","/interactions/cs13/ventral_outer_to_ventral_outer","/interactions/cs14/DM_to_DM","/interactions/cs14/DM_to_VM","/interactions/cs14/DM_to_dorsal_outer","/interactions/cs14/DM_to_dorsal_inner","/interactions/cs14/DM_to_ventral_inner","/interactions/cs14/DM_to_ventral_outer","/interactions/cs14/VM_to_DM","/interactions/cs14/VM_to_VM","/interactions/cs14/VM_to_dorsal_inner","/interactions/cs14/VM_to_dorsal_outer","/interactions/cs14/VM_to_ventral_inner","/interactions/cs14/VM_to_ventral_outer","/interactions/cs14/dorsal_inner_to_DM","/interactions/cs14/dorsal_inner_to_VM","/interactions/cs14/dorsal_inner_to_dorsal_inner","/interactions/cs14/dorsal_inner_to_dorsal_median","/interactions/cs14/dorsal_inner_to_dorsal_outer","/interactions/cs14/dorsal_inner_to_ventral_inner","/interactions/cs14/dorsal_inner_to_ventral_median","/interactions/cs14/dorsal_inner_to_ventral_outer","/interactions/cs14/dorsal_median_to_dorsal_inner","/interactions/cs14/dorsal_median_to_dorsal_median","/interactions/cs14/dorsal_median_to_dorsal_outer","/interactions/cs14/dorsal_median_to_ventral_inner","/interactions/cs14/dorsal_median_to_ventral_median","/interactions/cs14/dorsal_median_to_ventral_outer","/interactions/cs14/dorsal_outer_to_DM","/interactions/cs14/dorsal_outer_to_VM","/interactions/cs14/dorsal_outer_to_dorsal_inner","/interactions/cs14/dorsal_outer_to_dorsal_median","/interactions/cs14/dorsal_outer_to_dorsal_outer","/interactions/cs14/dorsal_outer_to_ventral_inner","/interactions/cs14/dorsal_outer_to_ventral_median","/interactions/cs14/dorsal_outer_to_ventral_outer","/interactions/cs14/ventral_inner_to_DM","/interactions/cs14/ventral_inner_to_VM","/interactions/cs14/ventral_inner_to_dorsal_inner","/interactions/cs14/ventral_inner_to_dorsal_median","/interactions/cs14/ventral_inner_to_dorsal_outer","/interactions/cs14/ventral_inner_to_ventral_median","/interactions/cs14/ventral_inner_to_ventral_inner","/interactions/cs14/ventral_inner_to_ventral_outer","/interactions/cs14/ventral_median_to_dorsal_median","/interactions/cs14/ventral_median_to_dorsal_inner","/interactions/cs14/ventral_median_to_dorsal_outer","/interactions/cs14/ventral_median_to_ventral_inner","/interactions/cs14/ventral_median_to_ventral_outer","/interactions/cs14/ventral_median_to_ventral_median","/interactions/cs14/ventral_outer_to_VM","/interactions/cs14/ventral_outer_to_dorsal_inner","/interactions/cs14/ventral_outer_to_DM","/interactions/cs14/ventral_outer_to_dorsal_median","/interactions/cs14/ventral_outer_to_dorsal_outer","/interactions/cs14/ventral_outer_to_ventral_inner","/interactions/cs14/ventral_outer_to_ventral_median","/interactions/cs14/ventral_outer_to_ventral_outer","/interactions/cs16/DM_to_DM","/interactions/cs16/DM_to_VM","/interactions/cs16/DM_to_dorsal_inner","/interactions/cs16/DM_to_dorsal_outer","/interactions/cs16/DM_to_ventral_outer","/interactions/cs16/DM_to_ventral_inner","/interactions/cs16/VM_to_DM","/interactions/cs16/VM_to_VM","/interactions/cs16/VM_to_dorsal_inner","/interactions/cs16/VM_to_dorsal_outer","/interactions/cs16/dorsal_inner_to_DM","/interactions/cs16/dorsal_inner_to_dorsal_inner","/interactions/cs16/dorsal_inner_to_VM","/interactions/cs16/dorsal_inner_to_dorsal_median","/interactions/cs16/dorsal_inner_to_ventral_inner","/interactions/cs16/dorsal_inner_to_dorsal_outer","/interactions/cs16/dorsal_inner_to_ventral_median","/interactions/cs16/dorsal_inner_to_ventral_outer","/interactions/cs16/dorsal_median_to_dorsal_inner","/interactions/cs16/dorsal_median_to_dorsal_median","/interactions/cs16/dorsal_median_to_ventral_inner","/interactions/cs16/dorsal_median_to_dorsal_outer","/interactions/cs16/dorsal_median_to_ventral_median","/interactions/cs16/dorsal_median_to_ventral_outer","/interactions/cs16/dorsal_outer_to_DM","/interactions/cs16/dorsal_outer_to_VM","/interactions/cs16/dorsal_outer_to_dorsal_inner","/interactions/cs16/dorsal_outer_to_dorsal_median","/interactions/cs16/dorsal_outer_to_dorsal_outer","/interactions/cs16/dorsal_outer_to_ventral_inner","/interactions/cs16/dorsal_outer_to_ventral_median","/interactions/cs16/dorsal_outer_to_ventral_outer","/interactions/cs16/ventral_inner_to_DM","/interactions/cs16/ventral_inner_to_VM","/interactions/cs16/ventral_inner_to_dorsal_inner","/interactions/cs16/ventral_inner_to_dorsal_median","/interactions/cs16/ventral_inner_to_dorsal_outer","/interactions/cs16/ventral_inner_to_ventral_inner","/interactions/cs16/ventral_inner_to_ventral_median","/interactions/cs16/ventral_median_to_dorsal_inner","/interactions/cs16/ventral_inner_to_ventral_outer","/interactions/cs16/ventral_median_to_dorsal_median","/interactions/cs16/ventral_median_to_dorsal_outer","/interactions/cs16/ventral_median_to_ventral_inner","/interactions/cs16/ventral_median_to_ventral_median","/interactions/cs16/ventral_median_to_ventral_outer","/interactions/cs16/ventral_outer_to_DM","/interactions/cs16/ventral_outer_to_VM","/interactions/cs16/ventral_outer_to_dorsal_inner","/interactions/cs16/ventral_outer_to_dorsal_median","/interactions/cs16/ventral_outer_to_dorsal_outer","/interactions/cs16/ventral_outer_to_ventral_inner","/interactions/cs16/ventral_outer_to_ventral_median","/interactions/cs16/ventral_outer_to_ventral_outer","/interactions/umap/cl_0_to_cl_0","/interactions/umap/cl_0_to_cl_1","/interactions/umap/cl_0_to_cl_10","/interactions/umap/cl_0_to_cl_2","/interactions/umap/cl_0_to_cl_3","/interactions/umap/cl_0_to_cl_4","/interactions/umap/cl_0_to_cl_5","/interactions/umap/cl_0_to_cl_6","/interactions/umap/cl_0_to_cl_8","/interactions/umap/cl_0_to_cl_7","/interactions/umap/cl_0_to_cl_9","/interactions/umap/cl_10_to_cl_0","/interactions/umap/cl_10_to_cl_1","/interactions/umap/cl_10_to_cl_10","/interactions/umap/cl_10_to_cl_2","/interactions/umap/cl_10_to_cl_3","/interactions/umap/cl_10_to_cl_4","/interactions/umap/cl_10_to_cl_5","/interactions/umap/cl_10_to_cl_6","/interactions/umap/cl_10_to_cl_7","/interactions/umap/cl_10_to_cl_8","/interactions/umap/cl_1_to_cl_0","/interactions/umap/cl_10_to_cl_9","/interactions/umap/cl_1_to_cl_1","/interactions/umap/cl_1_to_cl_10","/interactions/umap/cl_1_to_cl_2","/interactions/umap/cl_1_to_cl_3","/interactions/umap/cl_1_to_cl_4","/interactions/umap/cl_1_to_cl_5","/interactions/umap/cl_1_to_cl_6","/interactions/umap/cl_1_to_cl_7","/interactions/umap/cl_1_to_cl_9","/interactions/umap/cl_1_to_cl_8","/interactions/umap/cl_2_to_cl_0","/interactions/umap/cl_2_to_cl_1","/interactions/umap/cl_2_to_cl_10","/interactions/umap/cl_2_to_cl_2","/interactions/umap/cl_2_to_cl_3","/interactions/umap/cl_2_to_cl_4","/interactions/umap/cl_2_to_cl_5","/interactions/umap/cl_2_to_cl_6","/interactions/umap/cl_2_to_cl_7","/interactions/umap/cl_2_to_cl_8","/interactions/umap/cl_2_to_cl_9","/interactions/umap/cl_3_to_cl_0","/interactions/umap/cl_3_to_cl_1","/interactions/umap/cl_3_to_cl_10","/interactions/umap/cl_3_to_cl_2","/interactions/umap/cl_3_to_cl_3","/interactions/umap/cl_3_to_cl_4","/interactions/umap/cl_3_to_cl_5","/interactions/umap/cl_3_to_cl_6","/interactions/umap/cl_3_to_cl_7","/interactions/umap/cl_3_to_cl_8","/interactions/umap/cl_3_to_cl_9","/interactions/umap/cl_4_to_cl_0","/interactions/umap/cl_4_to_cl_1","/interactions/umap/cl_4_to_cl_10","/interactions/umap/cl_4_to_cl_2","/interactions/umap/cl_4_to_cl_4","/interactions/umap/cl_4_to_cl_3","/interactions/umap/cl_4_to_cl_5","/interactions/umap/cl_4_to_cl_6","/interactions/umap/cl_4_to_cl_7","/interactions/umap/cl_4_to_cl_8","/interactions/umap/cl_4_to_cl_9","/interactions/umap/cl_5_to_cl_0","/interactions/umap/cl_5_to_cl_1","/interactions/umap/cl_5_to_cl_10","/interactions/umap/cl_5_to_cl_2","/interactions/umap/cl_5_to_cl_3","/interactions/umap/cl_5_to_cl_5","/interactions/umap/cl_5_to_cl_4","/interactions/umap/cl_5_to_cl_6","/interactions/umap/cl_5_to_cl_8","/interactions/umap/cl_5_to_cl_7","/interactions/umap/cl_5_to_cl_9","/interactions/umap/cl_6_to_cl_0","/interactions/umap/cl_6_to_cl_1","/interactions/umap/cl_6_to_cl_10","/interactions/umap/cl_6_to_cl_2","/interactions/umap/cl_6_to_cl_3","/interactions/umap/cl_6_to_cl_4","/interactions/cs16/VM_to_ventral_inner","/interactions/umap/cl_6_to_cl_8","/interactions/umap/cl_6_to_cl_5","/interactions/cs16/VM_to_ventral_outer","/interactions/umap/cl_6_to_cl_9","/interactions/umap/cl_7_to_cl_1","/interactions/umap/cl_7_to_cl_0","/interactions/umap/cl_7_to_cl_10","/interactions/umap/cl_7_to_cl_2","/interactions/umap/cl_7_to_cl_3","/interactions/umap/cl_7_to_cl_4","/interactions/umap/cl_7_to_cl_5","/interactions/umap/cl_7_to_cl_6","/interactions/umap/cl_7_to_cl_8","/interactions/umap/cl_7_to_cl_7","/interactions/umap/cl_7_to_cl_9","/interactions/umap/cl_8_to_cl_0","/interactions/umap/cl_8_to_cl_1","/interactions/umap/cl_8_to_cl_10","/interactions/umap/cl_8_to_cl_2","/interactions/umap/cl_8_to_cl_3","/interactions/umap/cl_8_to_cl_4","/interactions/umap/cl_8_to_cl_5","/interactions/umap/cl_8_to_cl_6","/interactions/umap/cl_8_to_cl_7","/interactions/umap/cl_8_to_cl_8","/interactions/umap/cl_8_to_cl_9","/interactions/umap/cl_9_to_cl_0","/interactions/umap/cl_9_to_cl_1","/interactions/umap/cl_9_to_cl_10","/interactions/umap/cl_9_to_cl_2","/interactions/umap/cl_9_to_cl_3","/interactions/umap/cl_9_to_cl_4","/interactions/umap/cl_9_to_cl_5","/interactions/umap/cl_9_to_cl_6","/interactions/umap/cl_9_to_cl_7","/interactions/umap/cl_9_to_cl_8","/interactions/umap/cl_9_to_cl_9","/interactions/umap/cl_6_to_cl_6","/interactions/umap/cl_6_to_cl_7"],w=function(){var t={},e=[];Array.from(arguments).forEach((function(n){"string"==typeof n?e.push(n):"object"===Object(r.a)(n)&&(t=n)}));var n=t,o=n.text,text=void 0!==o&&o,h=n.deep,c=void 0!==h&&h,path="/".concat(e.join("/").replace(/\/+/g,"/")),_=!path||!!m.find((function(t){return t===path})),d=_?{dir:c?{$regex:new RegExp("^".concat(path))}:path}:{path:path},w=_?[]:[function(data){return data[0]}];return new l.a({query:f.chain().find(d,!_),path:path,postprocess:w,text:text},{fullTextSearchFields:["title","description","slug","text"]})};e.default=function(t){return(d=new c.a("content.db")).loadJSONObject(t),f=d.getCollection("items"),w}}}]);